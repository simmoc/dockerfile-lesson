
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as R}from"./index.a5dee889.js";import{_ as P}from"./index.f1e12eef.js";import{H as Q}from"./index.94e839d6.js";import{P as V,O as G,M as g,o as A,h as C,r as B,a as l,q as c,y,z as v,t as e,A as s,c as m,L as E,D as p,R as j,S as D,H as o,F as z,G as J}from"./vendor.d2559d84.js";import{C as W}from"./index.41459e6c.js";import K from"./memberCheck.fd55ab8d.js";import{_ as U}from"./plugin-vue_export-helper.21dcd24c.js";import"./word-img.bb3865fc.js";import"./drag.56588ea6.js";import"./sortable.esm.81321d43.js";import"./index.fece4a24.js";import"./contant.2e72a177.js";import"./error.32433a76.js";const x=w=>(z("data-v-1c1c4cd6"),w=w(),J(),w),X={class:"flex flex-justify-between"},Y={class:"titleClass"},Z=o("\u67E5\u770B\u6267\u884C\u8BE6\u60C5"),ee=o("\u7F16\u8F91"),te={key:0},se={class:"mt16"},le={class:"textClass"},ae=o(" \u53D1\u9001\u5BF9\u8C61\u7C7B\u578B\uFF1A "),oe={class:"content"},ne={class:"textClass ml32"},_e=o(" \u7B5B\u9009\u5BA2\u6237\uFF1A "),ce={class:"content"},ie={key:0,class:"mt16 flex flex-align-center"},re={class:"textClass flex flex-align-center"},ue=x(()=>e("div",null,"\u6807\u7B7E\u7B5B\u9009\uFF1A",-1)),de={key:0,class:"labelBox"},pe={key:1,class:"labelBox"},ve={class:"member-tag-pop"},he={class:"flex flex-align-center"},me={class:"labelBox"},fe=x(()=>e("div",null,"...",-1)),xe={class:"textClass ml32 flex flex-align-center pointer"},ge=x(()=>e("div",null,"\u6210\u5458\uFF1A",-1)),ye=o("\u67E5\u770B\u6210\u5458\u5217\u8868"),be={class:"mt24"},ke=x(()=>e("p",{class:"otherTitleClass"},"\u5176\u4ED6\u4FE1\u606F",-1)),Ce={class:"mt8 otherTitle flex flex-direction-column p20"},we={class:"flex-1 textClass"},je=o(" \u89E6\u8FBE\u65B9\u5F0F\uFF1A "),De={class:"content"},Fe={class:"flex-1 textClass"},He={class:"flex-1"},Ie={class:"textClass"},Me=o(" \u4EFB\u52A1\u5F00\u59CB\u65F6\u95F4\uFF1A "),Te={class:"content"},qe={class:"textClass"},Be=o(" \u4EFB\u52A1\u622A\u6B62\u65F6\u95F4\uFF1A "),Ee={class:"content"},Ne={key:0,class:"flex-1"},$e={class:"textClass"},Oe=o(" \u91CD\u590D\uFF1A "),Se={class:"content"},Le={class:"textClass ml24"},Re=o(" \u9891\u7387\uFF1A "),Pe={class:"content"},Qe={key:0,class:"textClass ml24"},Ve={key:0,class:"content"},Ge={class:"content"},Ae={class:"content"},ze={key:1,class:"textClass ml24"},Je={class:"content"},We={class:"textClass mt8"},Ke=o(" \u91CD\u590D\u81F3\uFF1A "),Ue={class:"content"},Xe={key:1},Ye={class:"mt16"},Ze={class:"textClass"},et=o(" \u53D1\u9001\u5BF9\u8C61\u7C7B\u578B\uFF1A "),tt={class:"content"},st={class:"textClass"},lt=o(" \u7B5B\u9009\u5BA2\u6237\u7FA4\uFF1A "),at={class:"content"},ot={key:0,class:"mt16"},nt={class:"textClass flex flex-align-center pointer"},_t=o(" \u6210\u5458(\u7FA4\u4E3B)\u7B5B\u9009\uFF1A "),ct=o("\u67E5\u770B\u6210\u5458\u5217\u8868"),it={class:"mt24"},rt=x(()=>e("p",{class:"otherTitleClass"},"\u5176\u4ED6\u4FE1\u606F",-1)),ut={class:"mt8 otherTitle flex flex-direction-column p20"},dt={class:"flex-1 textClass"},pt=o(" \u89E6\u8FBE\u65B9\u5F0F\uFF1A "),vt={class:"content"},ht={class:"flex-1 textClass"},mt={class:"flex-1"},ft={class:"textClass"},xt=o(" \u4EFB\u52A1\u5F00\u59CB\u65F6\u95F4\uFF1A "),gt={class:"content"},yt={class:"textClass"},bt=o(" \u4EFB\u52A1\u622A\u6B62\u65F6\u95F4\uFF1A "),kt={class:"content"},Ct={key:0,class:"flex-1"},wt={class:"textClass"},jt=o(" \u91CD\u590D\uFF1A "),Dt={class:"content"},Ft={class:"textClass"},Ht=o(" \u9891\u7387\uFF1A "),It={class:"content"},Mt={key:0,class:"textClass ml24"},Tt={key:0,class:"content"},qt={class:"content"},Bt={class:"content"},Et={key:1,class:"textClass ml24"},Nt={class:"content"},$t={class:"textClass mt8"},Ot=o(" \u91CD\u590D\u81F3\uFF1A "),St={class:"content"},Lt={key:2},Rt={class:"mt16"},Pt={class:"textClass"},Qt=o(" \u53D1\u9001\u5BF9\u8C61\u7C7B\u578B\uFF1A "),Vt={class:"content"},Gt={class:"textClass"},At=o(" \u7B5B\u9009\u5BA2\u6237\uFF1A "),zt={class:"content"},Jt={key:0,class:"mt16 flex flex-align-center"},Wt={class:"textClass flex flex-align-center"},Kt=x(()=>e("div",null,"\u6807\u7B7E\u7B5B\u9009\uFF1A",-1)),Ut={key:0,class:"labelBox"},Xt={key:1,class:"labelBox"},Yt={class:"member-tag-pop"},Zt={class:"flex flex-align-center"},es={class:"labelBox"},ts=x(()=>e("div",null,"...",-1)),ss={class:"textClass ml32 flex flex-align-center pointer"},ls=x(()=>e("div",null,"\u6210\u5458\uFF1A",-1)),as=o("\u67E5\u770B\u6210\u5458\u5217\u8868"),os={class:"mt24"},ns=x(()=>e("p",{class:"otherTitleClass"},"\u5176\u4ED6\u4FE1\u606F",-1)),_s={class:"mt8 otherTitle flex flex-direction-column p20"},cs={class:"flex-1 textClass"},is=o(" \u89E6\u8FBE\u65B9\u5F0F\uFF1A "),rs={class:"content"},us={class:"flex-1 textClass"},ds={class:"flex-1"},ps={class:"textClass"},vs=o(" \u4EFB\u52A1\u5F00\u59CB\u65F6\u95F4\uFF1A "),hs={class:"content"},ms={class:"textClass"},fs=o(" \u4EFB\u52A1\u622A\u6B62\u65F6\u95F4\uFF1A "),xs={class:"content"},gs={key:0,class:"flex-1"},ys={class:"textClass"},bs=o(" \u91CD\u590D\uFF1A "),ks={class:"content"},Cs={class:"textClass"},ws=o(" \u9891\u7387\uFF1A "),js={class:"content"},Ds={key:0,class:"textClass ml24"},Fs={key:0,class:"content"},Hs={class:"content"},Is={class:"content"},Ms={key:1,class:"textClass ml24"},Ts={class:"content"},qs={class:"textClass mt8"},Bs=o(" \u91CD\u590D\u81F3\uFF1A "),Es={class:"content"},Ns={class:"mt24 search-head-wrap"},$s=x(()=>e("label",{class:"otherTitleClass"},"\u6D88\u606F\u5185\u5BB9",-1)),Os={setup(w){const I=V(),F=G(),f=g(""),h=g([]),M=g([]),T=g({}),u=g([]),t=g({}),b=g(!1),q=g(!1);function N(d){I.push({name:"ImplementDetail",query:{id:d,is_repeat:t.value.is_repeat}})}function $(d){I.push({name:"editPlanTask",query:{title:"\u8BA1\u5212\u4EFB\u52A1",id:d,type:"edit"}})}A(()=>{O(F.query.id)});const O=async d=>{let{data:r}=await Q.editOrDetailTask({id:d});t.value=r,console.log("PlanDetailData.value",t.value),JSON.stringify(t.value.receive_group)!="[]"&&(t.value.receive_group[0].tag_arr&&(u.value=t.value.receive_group[0].tag_arr),t.value.receive_group[0].select_members_info&&(T.value=t.value.receive_group[0])),M.value=S(r),C(t.value.start_time).unix()*1e3-1>new Date-1&&(q.value=!0),H(t.value.start_time),t.value.start_time=C(t.value.start_time).format(`MM-DD ${f.value} HH:mm`),H(t.value.end_time),t.value.end_time=C(t.value.end_time).format(`MM-DD ${f.value} HH:mm`),H(t.value.repeat_deadline),t.value.repeat_deadline=C(t.value.repeat_deadline).format(`MM-DD ${f.value} HH:mm`),JSON.stringify(t.value.repeat_node)!="null"&&L(t.value.repeat_node)},S=d=>{let r=[];if(d.content){let a={type:"TEXT",content:d.content};r.push(a)}if(console.log("\u5904\u7406\u524D\u6570\u636E",d.annex_content_json),d.annex_content_json&&d.annex_content_json.length){let a=d.annex_content_json;for(let n=0;n<a.length;n++){let _={},k="";switch(a[n].type){case"images":_.type="IMAGE",_.file_id=a[n].source_id,_.sort=n,_.file_url=a[n].upload_url;break;case"web_page":_.type="LINK",_.sort=n,_.file_id=a[n].source_id,_.qw_link_title=a[n].title,_.file_url=a[n].upload_url,_.qw_link_desc=a[n].description,k=a[n].url.split("://"),_.qw_link_url=k[1],_.url=k[0]+"://";break;case"we_applets":_.type="MINIPROGRAM",_.sort=n,_.file_id=a[n].source_id,_.qw_miniprogram_title=a[n].title,_.qw_miniprogram_appid=a[n].appid,_.qw_miniprogram_page=a[n].url,_.file_url=a[n].upload_url;break;case"video":_.sort=n,_.type="VIDEO",_.file_id=a[n].source_id,_.title=a[n].title||"",_.file_url=a[n].media_url;break;case"FILE":_=a[n];break}r.push(_)}}return console.log("\u56DE\u663E\u6570\u636E",r),r};function H(d){switch(C(d).day()){case 1:return f.value="\u661F\u671F\u4E00";case 2:return f.value="\u661F\u671F\u4E8C";case 3:return f.value="\u661F\u671F\u4E09";case 4:return f.value="\u661F\u671F\u56DB";case 5:return f.value="\u661F\u671F\u4E94";case 6:return f.value="\u661F\u671F\u516D";case 0:return f.value="\u661F\u671F\u65E5"}}function L(d){let r=d,a=[];r.forEach(n=>{switch(n){case"1":return a.push("\u661F\u671F\u4E00");case"2":return a.push("\u661F\u671F\u4E8C");case"3":return a.push("\u661F\u671F\u4E09");case"4":return a.push("\u661F\u671F\u56DB");case"5":return a.push("\u661F\u671F\u4E94");case"6":return a.push("\u661F\u671F\u516D");case"7":return a.push("\u661F\u671F\u65E5");default:return a.push(n)}}),h.value=a.join("; "),console.log("week",h.value,h.value.length)}return(d,r)=>{const a=B("el-button"),n=R,_=B("el-popover"),k=P;return l(),c("div",null,[y(k,{class:"page-scroll"},{default:v(()=>[e("div",null,[e("div",X,[e("label",Y,s(t.value.name),1),e("div",null,[t.value.is_show_button===1?(l(),m(a,{key:0,size:"small",class:"ml12",onClick:r[0]||(r[0]=i=>N(E(F).query.id))},{default:v(()=>[Z]),_:1})):p("",!0),q.value?(l(),m(a,{key:1,type:"primary",size:"small",class:"ml12",onClick:r[1]||(r[1]=i=>$(E(F).query.id))},{default:v(()=>[ee]),_:1})):p("",!0)])]),t.value.touch_object==="SINGLE"?(l(),c("div",te,[e("div",null,[e("div",se,[e("label",le,[ae,e("span",oe,s(t.value.touch_object_txt),1)]),e("label",ne,[_e,e("span",ce,s(t.value.receive_type_txt),1)])]),t.value.receive_type=="1"?(l(),c("div",ie,[e("label",re,[ue,u.value.length===0?(l(),c("div",de," -- ")):p("",!0),u.value.length===1?(l(),c("div",pe,[(l(!0),c(j,null,D(u.value,i=>(l(),m(n,{key:i.tag_group_id,"left-title":i.tag_group_name,"right-title":i.name,color:i.tag_type==="HQ"?"#409eff":"#FF6F00","customer-style":{"margin-bottom":0}},null,8,["left-title","right-title","color"]))),128))])):p("",!0),u.value.length>1?(l(),m(_,{key:2,placement:"bottom",trigger:"hover","popper-class":"key-word-pop",width:"542"},{reference:v(()=>[e("div",he,[e("div",me,[y(n,{"left-title":u.value[0].tag_group_name,"right-title":u.value[0].name,color:u.value[0].tag_type==="HQ"?"#409eff":"#FF6F00","customer-style":{"margin-bottom":0}},null,8,["left-title","right-title","color"])]),fe])]),default:v(()=>[e("div",ve,[(l(!0),c(j,null,D(u.value,i=>(l(),m(n,{key:i.tag_group_id,"left-title":i.tag_group_name,"right-title":i.name,color:i.tag_type==="HQ"?"#409eff":"#FF6F00","right-text-break":!1,"right-text-auto":!0},null,8,["left-title","right-title","color"]))),128))])]),_:1})):p("",!0)]),e("label",xe,[ge,y(a,{class:"show-member",type:"primary",onClick:r[2]||(r[2]=i=>b.value=!0)},{default:v(()=>[ye]),_:1})])])):p("",!0)]),e("div",be,[ke,e("div",Ce,[e("p",we,[je,e("span",De,s(t.value.task_type_txt),1)]),e("p",Fe,"\u9884\u4F30\u89E6\u8FBE\u5BA2\u6237\u6570\uFF1A"+s(t.value.select_receiver_num-t.value.no_touch_num)+"\uFF0C\u7B5B\u9009\u5BA2\u6237\u6570\uFF1A"+s(t.value.select_receiver_num)+"\uFF0C\u4E0D\u53EF\u89E6\u8FBE\u6570\uFF1A"+s(t.value.no_touch_num),1),e("div",He,[e("label",Ie,[Me,e("span",Te,s(t.value.start_time),1)]),e("label",qe,[Be,e("span",Ee,s(t.value.end_time),1)])]),t.value.is_repeat=="1"?(l(),c("div",Ne,[e("div",null,[e("label",$e,[Oe,e("span",Se,s(t.value.is_repeat_txt),1)]),e("label",Le,[Re,e("span",Pe,"\u6309"+s(t.value.repeat_type_txt)+"\u91CD\u590D",1)]),t.value.repeat_type_txt!="\u5929"?(l(),c("label",Qe,[o(" \u6BCF"+s(t.value.repeat_type_txt)+"\uFF1A ",1),h.value.length<15?(l(),c("span",Ve,s(h.value),1)):(l(),m(_,{key:1,placement:"bottom",width:"400",trigger:"hover"},{reference:v(()=>[e("span",Ae,s(h.value.substring(0,14))+" ... ",1)]),default:v(()=>[e("span",Ge,s(h.value),1)]),_:1}))])):(l(),c("label",ze,[o(" \u6BCF"+s(t.value.repeat_type_txt)+"\uFF1A ",1),e("span",Je," \u6BCF\u9694"+s(t.value.repeat_space)+"\u5929\u91CD\u590D1\u6B21",1)]))]),e("div",We,[Ke,e("span",Ue,s(t.value.repeat_deadline),1)])])):p("",!0)])])])):p("",!0),t.value.touch_object==="GROUP"?(l(),c("div",Xe,[e("div",null,[e("div",Ye,[e("label",Ze,[et,e("span",tt,s(t.value.touch_object_txt),1)]),e("label",st,[lt,e("span",at,s(t.value.receive_type_txt),1)])]),t.value.receive_type=="1"?(l(),c("div",ot,[e("label",nt,[_t,y(a,{class:"show-member",type:"primary",onClick:r[3]||(r[3]=i=>b.value=!0)},{default:v(()=>[ct]),_:1})])])):p("",!0)]),e("div",it,[rt,e("div",ut,[e("p",dt,[pt,e("span",vt,s(t.value.task_type_txt),1)]),e("p",ht,"\u9884\u4F30\u89E6\u8FBE\u5BA2\u6237\u7FA4\u6570\uFF1A"+s(t.value.select_receiver_num-t.value.no_touch_num)+"\uFF0C\u7B5B\u9009\u5BA2\u6237\u7FA4\u6570\uFF1A"+s(t.value.select_receiver_num)+"\uFF0C\u4E0D\u53EF\u89E6\u8FBE\u6570\uFF1A"+s(t.value.no_touch_num),1),e("div",mt,[e("label",ft,[xt,e("span",gt,s(t.value.start_time),1)]),e("label",yt,[bt,e("span",kt,s(t.value.end_time),1)])]),t.value.is_repeat=="1"?(l(),c("div",Ct,[e("div",null,[e("label",wt,[jt,e("span",Dt,s(t.value.is_repeat_txt),1)]),e("label",Ft,[Ht,e("span",It,"\u6309"+s(t.value.repeat_type_txt)+"\u91CD\u590D",1)]),t.value.repeat_type_txt!="\u5929"?(l(),c("label",Mt,[o(" \u6BCF"+s(t.value.repeat_type_txt)+"\uFF1A ",1),h.value.length<15?(l(),c("span",Tt,s(h.value),1)):(l(),m(_,{key:1,placement:"bottom",width:"400",trigger:"hover"},{reference:v(()=>[e("span",Bt,s(h.value.substring(0,14))+" ... ",1)]),default:v(()=>[e("span",qt,s(h.value),1)]),_:1}))])):(l(),c("label",Et,[o(" \u6BCF"+s(t.value.repeat_type_txt)+"\uFF1A ",1),e("span",Nt," \u6BCF\u9694"+s(t.value.repeat_space)+"\u5929\u91CD\u590D1\u6B21",1)])),e("div",$t,[Ot,e("span",St,s(t.value.repeat_deadline),1)])])])):p("",!0)])])])):p("",!0),t.value.touch_object==="MOMENTS"?(l(),c("div",Lt,[e("div",null,[e("div",Rt,[e("label",Pt,[Qt,e("span",Vt,s(t.value.touch_object_txt),1)]),e("label",Gt,[At,e("span",zt,s(t.value.receive_type_txt),1)])])]),t.value.receive_type=="1"?(l(),c("div",Jt,[e("div",Wt,[Kt,u.value.length===0?(l(),c("div",Ut," -- ")):p("",!0),u.value.length===1?(l(),c("div",Xt,[(l(!0),c(j,null,D(u.value,i=>(l(),m(n,{key:i.tag_group_id,"left-title":i.tag_group_name,"right-title":i.name,color:i.tag_type==="HQ"?"#409eff":"#FF6F00","customer-style":{"margin-bottom":0}},null,8,["left-title","right-title","color"]))),128))])):p("",!0),u.value.length>1?(l(),m(_,{key:2,placement:"bottom",trigger:"hover","popper-class":"key-word-pop",width:"542"},{reference:v(()=>[e("div",Zt,[e("div",es,[y(n,{"left-title":u.value[0].tag_group_name,"right-title":u.value[0].name,color:u.value[0].tag_type==="HQ"?"#409eff":"#FF6F00","customer-style":{"margin-bottom":0}},null,8,["left-title","right-title","color"])]),ts])]),default:v(()=>[e("div",Yt,[(l(!0),c(j,null,D(u.value,i=>(l(),m(n,{key:i.tag_group_id,"left-title":i.tag_group_name,"right-title":i.name,color:i.tag_type==="HQ"?"#409eff":"#FF6F00","right-text-break":!1,"right-text-auto":!0},null,8,["left-title","right-title","color"]))),128))])]),_:1})):p("",!0)]),e("div",ss,[ls,y(a,{class:"show-member",type:"primary",onClick:r[4]||(r[4]=i=>b.value=!0)},{default:v(()=>[as]),_:1})])])):p("",!0),e("div",os,[ns,e("div",_s,[e("p",cs,[is,e("span",rs,s(t.value.task_type_txt),1)]),e("p",us,"\u9884\u4F30\u89E6\u8FBE\u5BA2\u6237\u6570\uFF1A"+s(t.value.select_receiver_num-t.value.no_touch_num)+"\uFF0C\u7B5B\u9009\u5BA2\u6237\u6570\uFF1A"+s(t.value.select_receiver_num)+"\uFF0C\u4E0D\u53EF\u89E6\u8FBE\u6570\uFF1A"+s(t.value.no_touch_num),1),e("div",ds,[e("label",ps,[vs,e("span",hs,s(t.value.start_time),1)]),e("label",ms,[fs,e("span",xs,s(t.value.end_time),1)])]),t.value.is_repeat=="1"?(l(),c("div",gs,[e("div",null,[e("label",ys,[bs,e("span",ks,s(t.value.is_repeat_txt),1)]),e("label",Cs,[ws,e("span",js,"\u6309"+s(t.value.repeat_type_txt)+"\u91CD\u590D",1)]),t.value.repeat_type_txt!="\u5929"?(l(),c("label",Ds,[o(" \u6BCF"+s(t.value.repeat_type_txt)+"\uFF1A ",1),h.value.length<15?(l(),c("span",Fs,s(h.value),1)):(l(),m(_,{key:1,placement:"bottom",width:"400",trigger:"hover"},{reference:v(()=>[e("span",Is,s(h.value.substring(0,14))+" ... ",1)]),default:v(()=>[e("span",Hs,s(h.value),1)]),_:1}))])):(l(),c("label",Ms,[o(" \u6BCF"+s(t.value.repeat_type_txt)+"\uFF1A ",1),e("span",Ts," \u6BCF\u9694"+s(t.value.repeat_space)+"\u5929\u91CD\u590D1\u6B21",1)])),e("div",qs,[Bs,e("span",Es,s(t.value.repeat_deadline),1)])])])):p("",!0)])])])):p("",!0),e("div",Ns,[$s,e("div",null,[y(W,{list:M.value,"check-list":!0},null,8,["list"])])])])]),_:1}),y(K,{id:T.value.id,visible:b.value,onOnClose:r[5]||(r[5]=i=>b.value=!1)},null,8,["id","visible"])])}}};var Xs=U(Os,[["__scopeId","data-v-1c1c4cd6"]]);export{Xs as default};
