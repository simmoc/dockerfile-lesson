
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as Z}from"./index.f8d47027.js";import{_ as ee}from"./index.333b158c.js";import{_ as ae}from"./index.6ba23372.js";import{_ as te}from"./index.f1e12eef.js";import{P as le,M as r,o as oe,r as u,a as p,q as h,t as s,y as a,z as l,B as se,R as _e,S as ne,c as re,A as _,H as b,F as ie,G as de}from"./vendor.d2559d84.js";import{H as O}from"./index.94e839d6.js";import{_ as ue}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.a5dee889.js";const T=w=>(ie("data-v-38eac3c2"),w=w(),de(),w),ce={class:"order-page"},me={class:"search-form"},ve=b("\u91CD\u7F6E"),pe=b("\u67E5\u8BE2"),fe={class:"tc flex flex-align-center"},ge=T(()=>s("span",{class:"page-tab"},"\u5F85\u4F7F\u7528",-1)),he={class:"ml4 order-circle"},be={class:"order-num"},we={class:"tc flex flex-align-center"},ye=T(()=>s("span",{class:"page-tab"},"\u5DF2\u4F7F\u7528",-1)),Ve={class:"ml4 order-circle"},xe={class:"order-num"},ke={class:"tc flex flex-align-center"},Ce=T(()=>s("span",{class:"page-tab"},"\u5DF2\u5931\u6548",-1)),Ye={class:"ml4 order-circle"},De={class:"order-num"},Se={class:"overflow-ellipsis"},Te={class:"flex flex-align-center"},Ue=["src"],ze={class:"ml8 lh24 show-line2"},He={key:0},Me=T(()=>s("br",null,null,-1)),je={key:1},Ne={key:0},Oe={key:1},$e={key:0},Be={key:1},Ge=b(" \u67E5\u770B\u8BE6\u60C5 "),Ie={setup(w){const I=le(),y=r([new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)]),o=r({}),V=r([]),x=r([]),k=r([]),C=r([]),Y=r({}),U=r(!1),m=r({page_num:1,page_size:10}),z=r(0),H=r([]),i=r("wait_use"),v=r({}),$=r([]),K=n=>{m.value.page_num=1,f(n)},M=async n=>{let{data:t}=await O.getOrderStoretotal(o.value);if(v.value=t,JSON.stringify(o.value)!="{}")for(let g in v.value)if(v.value[n]!="0"){f(n);return}else if(v.value[g]!="0")if(v.value.wait_use!="0"){i.value="wait_use",f("wait_use");return}else if(v.value.used!="0"){i.value="used",f("used");return}else{i.value="failure",f("failure");return}else H.value=[],z.value=0},f=async n=>{let{data:t}=await O.getOrderStorelist({order_status:n,page_num:m.value.page_num,page_size:m.value.page_size,search_order_no:o.value.search_order_no,search_goods_name:o.value.search_goods_name,search_goods_category_id:o.value.search_goods_category_id,search_customer_nickname:o.value.search_customer_nickname,search_customer_mobile:o.value.search_customer_mobile,search_contact_name:o.value.search_contact_name,search_contact_mobile:o.value.search_contact_mobile,search_from_convert_time:o.value.search_from_convert_time,search_to_convert_time:o.value.search_to_convert_time,search_from_begin_to_use_time:o.value.search_from_begin_to_use_time,search_to_begin_to_use_time:o.value.search_to_begin_to_use_time,search_from_end_to_use_time:o.value.search_from_end_to_use_time,search_to_end_to_use_time:o.value.search_to_end_to_use_time,search_from_verification_time:o.value.search_from_verification_time,search_to_verification_time:o.value.search_to_verification_time,search_goods_id:o.value.search_goods_id});H.value=t.list,z.value=t.total_num},R=()=>{o.value={},m.value.page_num=1,m.value.page_size=10,i.value="wait_use",V.value=[],x.value=[],k.value=[],C.value=[],U.value=!U.value,M(),f("wait_use")},B=()=>{JSON.stringify(Y.value)!="{}"&&(o.value.search_goods_id=Y.value.checkGoods.goods_id),M(i.value)},q=n=>{I.push({name:"storeOrderDetail",query:{id:n}})},E=async()=>{let{data:n}=await O.getGoodsTypes();$.value=n,console.log("11111",n)},D=(n,t,g)=>{if(n&&n[0]){o.value[t]=n[0],o.value[g]=n[1];return}o.value[t]="",o.value[g]=""};return oe(()=>{M(),f("wait_use"),E()}),(n,t)=>{const g=u("el-input"),c=u("el-form-item"),F=Z,S=u("el-date-picker"),J=u("el-option"),P=u("el-select"),j=u("el-button"),A=u("el-form"),N=u("el-tab-pane"),L=u("el-tabs"),G=u("el-popover"),d=u("el-table-column"),Q=ee,W=ae,X=te;return p(),h("div",ce,[s("div",me,[a(A,{"label-width":"120px",inline:!0,size:"small",class:"clearfix"},{default:l(()=>[a(c,{label:"\u8BA2\u5355\u7F16\u53F7:"},{default:l(()=>[a(g,{modelValue:o.value.search_order_no,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value.search_order_no=e),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u7F16\u53F7",class:"width-class",onKeyup:se(B,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),a(c,{label:"\u5546\u54C1\u540D\u79F0:"},{default:l(()=>[a(F,{modelValue:Y.value,"onUpdate:modelValue":t[1]||(t[1]=e=>Y.value=e),"shop-name-close":U.value,class:"width-class"},null,8,["modelValue","shop-name-close"])]),_:1}),a(c,{label:"\u5151\u6362\u65F6\u95F4:"},{default:l(()=>[a(S,{modelValue:V.value,"onUpdate:modelValue":t[2]||(t[2]=e=>V.value=e),type:"daterange","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4","value-format":"YYYY-MM-DD HH:mm:ss","default-time":y.value,onChange:t[3]||(t[3]=e=>D(V.value,"search_from_convert_time","search_to_convert_time"))},null,8,["modelValue","default-time"])]),_:1}),a(c,{label:"\u5546\u54C1\u7C7B\u76EE:"},{default:l(()=>[a(P,{modelValue:o.value.search_goods_category_id,"onUpdate:modelValue":t[4]||(t[4]=e=>o.value.search_goods_category_id=e),placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u7C7B\u76EE",class:"width-class"},{default:l(()=>[(p(!0),h(_e,null,ne($.value,e=>(p(),re(J,{key:e.goods_category_id,label:e.name,value:e.goods_category_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(c,{label:"\u5151\u6362\u4EBA\u6635\u79F0:"},{default:l(()=>[a(g,{modelValue:o.value.search_customer_nickname,"onUpdate:modelValue":t[5]||(t[5]=e=>o.value.search_customer_nickname=e),placeholder:"\u8BF7\u8F93\u5165\u5151\u6362\u4EBA\u6635\u79F0",class:"width-class"},null,8,["modelValue"])]),_:1}),a(c,{label:"\u5151\u6362\u4EBA\u624B\u673A\u53F7:"},{default:l(()=>[a(g,{modelValue:o.value.search_customer_mobile,"onUpdate:modelValue":t[6]||(t[6]=e=>o.value.search_customer_mobile=e),placeholder:"\u8BF7\u8F93\u5165\u5151\u6362\u4EBA\u624B\u673A\u53F7",class:"width-class"},null,8,["modelValue"])]),_:1}),a(c,{label:"\u53EF\u7528\u5F00\u59CB\u65F6\u95F4:"},{default:l(()=>[a(S,{modelValue:x.value,"onUpdate:modelValue":t[7]||(t[7]=e=>x.value=e),type:"daterange","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4","value-format":"YYYY-MM-DD HH:mm:ss","default-time":y.value,onChange:t[8]||(t[8]=e=>D(x.value,"search_from_begin_to_use_time","search_to_begin_to_use_time"))},null,8,["modelValue","default-time"])]),_:1}),a(c,{label:"\u53EF\u7528\u7ED3\u675F\u65F6\u95F4:"},{default:l(()=>[a(S,{modelValue:k.value,"onUpdate:modelValue":t[9]||(t[9]=e=>k.value=e),type:"daterange","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4","value-format":"YYYY-MM-DD HH:mm:ss","default-time":y.value,onChange:t[10]||(t[10]=e=>D(k.value,"search_from_end_to_use_time","search_to_end_to_use_time"))},null,8,["modelValue","default-time"])]),_:1}),a(c,{label:"\u4F7F\u7528\u65F6\u95F4:"},{default:l(()=>[a(S,{modelValue:C.value,"onUpdate:modelValue":t[11]||(t[11]=e=>C.value=e),type:"daterange","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4","value-format":"YYYY-MM-DD HH:mm:ss","default-time":y.value,onChange:t[12]||(t[12]=e=>D(C.value,"search_from_verification_time","search_to_verification_time"))},null,8,["modelValue","default-time"])]),_:1}),a(c,{class:"right mr0"},{default:l(()=>[a(j,{type:"default",size:"small",onClick:R},{default:l(()=>[ve]),_:1}),a(j,{type:"primary",size:"small",onClick:B},{default:l(()=>[pe]),_:1})]),_:1})]),_:1})]),a(X,null,{default:l(()=>[a(L,{modelValue:i.value,"onUpdate:modelValue":t[13]||(t[13]=e=>i.value=e),onTabClick:t[14]||(t[14]=e=>K(i.value))},{default:l(()=>[a(N,{label:"\u5F85\u4F7F\u7528",name:"wait_use"},{label:l(()=>[s("div",fe,[ge,s("i",he,[s("span",be,_(v.value.wait_use||"0"),1)])])]),_:1}),a(N,{label:"\u5DF2\u4F7F\u7528",name:"used"},{label:l(()=>[s("div",we,[ye,s("i",Ve,[s("span",xe,_(v.value.used||"0"),1)])])]),_:1}),a(N,{label:"\u5DF2\u5931\u6548",name:"failure"},{label:l(()=>[s("div",ke,[Ce,s("i",Ye,[s("span",De,_(v.value.failure||"0"),1)])])]),_:1})]),_:1},8,["modelValue"]),a(Q,{"table-data":H.value,"need-pagination":!0,class:"order-table"},{default:l(()=>[a(d,{prop:"order_no",label:"\u8BA2\u5355\u7F16\u53F7","min-width":"120"},{default:l(e=>[a(G,{width:200,trigger:"hover"},{reference:l(()=>[s("div",Se,_(e.row.order_no||"\u2014"),1)]),default:l(()=>[s("div",null,_(e.row.order_no),1)]),_:2},1024)]),_:1}),a(d,{prop:"goods_title",label:"\u5546\u54C1\u540D\u79F0","min-width":"240"},{default:l(e=>[s("div",Te,[s("img",{src:e.row.order_goods_img,class:"img-class flex-g0 flex-s0"},null,8,Ue),a(G,{width:200,trigger:"hover"},{reference:l(()=>[s("div",ze,_(e.row.goods_title||"\u2014"),1)]),default:l(()=>[s("div",null,_(e.row.goods_title),1)]),_:2},1024)])]),_:1}),a(d,{prop:"goods_category_name",label:"\u5546\u54C1\u7C7B\u76EE","min-width":"90"},{default:l(e=>[s("div",null,_(e.row.goods_category_name||"\u2014"),1)]),_:1}),a(d,{prop:"total_score",label:"\u5151\u6362\u6240\u9700\u79EF\u5206","min-width":"116"},{default:l(e=>[s("div",null,_(e.row.total_score||"\u2014"),1)]),_:1}),a(d,{prop:"nickname",label:"\u5151\u6362\u4EBA\u6635\u79F0","min-width":"102"},{default:l(e=>[s("div",null,_(e.row.nickname||"\u2014"),1)]),_:1}),a(d,{prop:"mobile",label:"\u5151\u6362\u4EBA\u624B\u673A\u53F7","min-width":"116"},{default:l(e=>[s("div",null,_(e.row.mobile||"\u2014"),1)]),_:1}),a(d,{prop:"validity_start_time",label:"\u6838\u9500\u65F6\u95F4","min-width":"200"},{default:l(e=>[e.row.validity_start_time?(p(),h("div",He,[b(_(e.row.validity_start_time)+" \u81F3 ",1),Me,b(" "+_(e.row.validity_end_time),1)])):(p(),h("div",je,_("\u2014")))]),_:1}),a(d,{prop:"paid_time",label:"\u5151\u6362\u65F6\u95F4","min-width":"160"},{default:l(e=>[s("div",null,_(e.row.paid_time||"\u2014"),1)]),_:1}),a(d,{prop:"verification_time",label:"\u4F7F\u7528\u65F6\u95F4","min-width":"160"},{default:l(e=>[i.value=="used"?(p(),h("div",Ne,_(e.row.verification_time||"\u2014"),1)):(p(),h("div",Oe,_("\u2014")))]),_:1}),a(d,{prop:"validity_end_time",label:"\u5931\u6548\u65F6\u95F4","min-width":"160"},{default:l(e=>[i.value=="failure"?(p(),h("div",$e,_(e.row.validity_end_time||"\u2014"),1)):(p(),h("div",Be,_("\u2014")))]),_:1}),a(d,{label:"\u64CD\u4F5C",prop:"",fixed:"right",width:"120"},{default:l(({row:e})=>[a(j,{type:"text",size:"mini",onClick:Ke=>q(e.order_id)},{default:l(()=>[Ge]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["table-data"]),a(W,{limit:m.value.page_size,"onUpdate:limit":t[15]||(t[15]=e=>m.value.page_size=e),page:m.value.page_num,"onUpdate:page":t[16]||(t[16]=e=>m.value.page_num=e),total:z.value,"get-data":()=>f(i.value)},null,8,["limit","page","total","get-data"])]),_:1})])}}};var Qe=ue(Ie,[["__scopeId","data-v-38eac3c2"]]);export{Qe as default};
