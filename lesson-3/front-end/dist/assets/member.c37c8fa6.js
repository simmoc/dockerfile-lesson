
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
var T=Object.defineProperty,A=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var I=(n,e,l)=>e in n?T(n,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[e]=l,M=(n,e)=>{for(var l in e||(e={}))V.call(e,l)&&I(n,l,e[l]);if(C)for(var l of C(e))x.call(e,l)&&I(n,l,e[l]);return n},N=(n,e)=>A(n,S(e));import{E as D,r as b,a as o,q as i,t as m,y as f,z as v,A as d,D as r,R as y,S as k,J as w,v as j,x as E}from"./vendor.d2559d84.js";import{H as F}from"./index.94e839d6.js";import{_ as B}from"./plugin-vue_export-helper.21dcd24c.js";const H={name:"",props:{staffInfo:{type:Object,default:()=>({})}},emits:["selectChat","selectNumber"],data(){return{page:1,isLoadAll:!1,isloading:!1,currentModel:"default",selectName:"",activeType:"1",customInfo:{nomsg:"\u8BE5\u6210\u5458\u672A\u6DFB\u52A0\u5916\u90E8\u5BA2\u6237",noSearchMsg:"\u672A\u641C\u7D22\u5230\u5BA2\u6237",customLists:[]},memberInfo:{nomsg:"\u8BE5\u6210\u5458\u6682\u672A\u52A0\u6210\u5458",noSearchMsg:"\u672A\u641C\u7D22\u5230\u6210\u5458",memberList:[]},groupInfo:{nomsg:"\u8BE5\u6210\u5458\u65E0\u521B\u5EFA\u7FA4\u804A",noSearchMsg:"\u672A\u641C\u7D22\u5230\u7FA4\u804A",groupList:[]},typeDataInfo:{1:{name:"customInfo",list:"customLists"},0:{name:"memberInfo",list:"memberList"},2:{name:"groupInfo",list:"groupList"}}}},watch:{staffInfo:{handler(n){console.log("\u5458\u5DE5\u4FE1\u606F\u53D1\u751F\u53D8\u5316",n),n.department_id&&(this.activeType="1",this.initMember(),this.getCustomList())},immediate:!0,deep:!0},activeType:{handler(n){this.$parent.activeType=n},immediate:!0,deep:!0}},methods:{initMember(){console.log("initMember",1111111),this.page=1,this.isloading=!1,this.isLoadAll=!1,this.customInfo.customLists=[],this.memberInfo.memberList=[],this.groupInfo.groupList=[]},handleClick(){console.log("\u5207\u6362tab"),this.selectName="",this.initMember(),this.getCustomList()},searchNumber(){this.initMember(),this.getCustomList(),console.log("selectName",this.selectName)},getCustomList(n){let{activeType:e,selectName:l,staffInfo:g,page:t}=this;if(!g.department_id)return!1;if(this.isloading)return;this.isloading=!0;let a={page:t,id:g&&g.department_id||"",type:e,keyword:l};console.log("getCustomList",a),F.getCustomList(a).then(p=>{this.currentModel=l?"search":"default";let{list:h,total_page:_}=p.data;console.log("\u5F53\u524D\u7684\u5217\u8868\u6570\u636E",p),h.forEach(c=>{c.type&&(c.companyName=c.type==1?"@\u5FAE\u4FE1":`@${c.corp_name}`),c.time=this.getFormatTime(c.qw_create_time)}),this.page++,this.isloading=!1,console.log("this.page",this.page),this.page>_&&(this.isLoadAll=!0);let u=this.typeDataInfo[e];console.log(u);let s=this[u.name][u.list];n=="concat"?this[u.name][u.list]=[...s,...h]:this[u.name][u.list]=h}).catch(()=>{this.isloading=!1,e==="1"?this.customInfo.customLists=[]:e==="0"?this.memberInfo.memberList=[]:e==="2"&&(this.groupInfo.groupList=[]),D.error("\u672C\u529F\u80FD\u9700\u8981\u5F00\u901A\u6210\u5458\u4F1A\u8BDD\u5B58\u6863\uFF0C\u8BF7\u8054\u7CFB\u4F01\u4E1A\u5FAE\u4FE1\u7BA1\u7406\u5458\u5E2E\u52A9\u4F60\u5B8C\u6210\u4F1A\u8BDD\u5B58\u6863\u5F00\u542F")})},clearMember(){this.selectName="",this.initMember(),this.getCustomList(),console.log("\u6E05\u7A7A\u4E86input\u6570\u636E")},selectNumber(n,e){this.$emit("selectNumber"),this.$emit("selectChat",N(M({},n),{chatType:e}))},getFormatTime(n){if(!n)return"";let e=parseInt(`${n}000`),l=new Date(e);var g=l.getFullYear(),t=l.getMonth()+1,a=l.getDate(),p=l.getHours(),h=l.getMinutes(),_=l.getSeconds();return`${g}-${t}-${a} ${p}:${h}:${_}`}}},q={class:"member"},z={class:"filter"},U={key:0,class:"no-msg"},J={key:1,class:"custom-list info-list"},O=["onClick"],R={class:"avar-img"},Y=["src"],G={class:"right"},K={class:"name"},P={key:0,class:"custom-item-more"},Q={key:1,class:"load-more"},W={key:0,class:"no-msg"},X={key:1,class:"custom-list info-list"},Z=["onClick"],$={class:"avar-img"},ee=["src"],te={class:"right"},se={key:0,class:"name"},oe={key:0,class:"custom-item-more"},ie={key:1,class:"load-more"},ne={key:0,class:"no-msg"},le={key:1,class:"custom-list info-list"},ae=["onClick"],re={class:"right"},ce={key:0,class:"name"},me={key:1,class:"time"},ue={key:0,class:"custom-item-more"},de={key:1,class:"load-more"};function he(n,e,l,g,t,a){const p=b("el-button"),h=b("el-input"),_=b("el-tab-pane"),u=b("el-tabs");return o(),i("div",q,[m("div",z,[f(h,{modelValue:t.selectName,"onUpdate:modelValue":e[0]||(e[0]=s=>t.selectName=s),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:"",onClear:a.clearMember},{append:v(()=>[f(p,{icon:"el-icon-search",onClick:a.searchNumber},null,8,["onClick"])]),_:1},8,["modelValue","onClear"])]),f(u,{modelValue:t.activeType,"onUpdate:modelValue":e[4]||(e[4]=s=>t.activeType=s),onTabClick:a.handleClick},{default:v(()=>[f(_,{label:"\u5BA2\u6237",name:"1"},{default:v(()=>[t.customInfo.customLists.length===0?(o(),i("div",U,d(t.currentModel==="default"?t.customInfo.nomsg:t.customInfo.noSearchMsg),1)):r("",!0),t.customInfo.customLists.length>0?(o(),i("div",J,[(o(!0),i(y,null,k(t.customInfo.customLists,(s,c)=>(o(),i("div",{key:c,class:"custom-item",onClick:L=>a.selectNumber(s,1)},[m("div",R,[m("img",{src:s.avatar,alt:""},null,8,Y)]),m("div",G,[m("div",K,[m("span",null,d(s.name),1),m("span",{class:w(["company-name"+s.type])},d(s.companyName),3)]),j(m("div",{class:"time"}," \u6DFB\u52A0\u65F6\u95F4"+d(s.time),513),[[E,s.time]])])],8,O))),128)),t.page>1?(o(),i("div",P,[t.isLoadAll?r("",!0):(o(),i("div",{key:0,class:"load-more",onClick:e[1]||(e[1]=s=>a.getCustomList("concat"))}," \u52A0\u8F7D\u66F4\u591A ")),t.isLoadAll?(o(),i("div",Q,"\u6CA1\u6709\u66F4\u591A\u4E86")):r("",!0)])):r("",!0)])):r("",!0)]),_:1}),f(_,{label:"\u6210\u5458",name:"0"},{default:v(()=>[t.memberInfo.memberList.length===0?(o(),i("div",W,d(t.currentModel==="default"?t.memberInfo.nomsg:t.memberInfo.noSearchMsg),1)):(o(),i("div",X,[(o(!0),i(y,null,k(t.memberInfo.memberList,(s,c)=>(o(),i("div",{key:c,class:"custom-item",onClick:L=>a.selectNumber(s,1)},[m("div",$,[m("img",{src:s.avatar,alt:""},null,8,ee)]),m("div",te,[s.name?(o(),i("div",se,d(s.name),1)):r("",!0)])],8,Z))),128)),t.page>1?(o(),i("div",oe,[t.isLoadAll?r("",!0):(o(),i("div",{key:0,class:"load-more",onClick:e[2]||(e[2]=s=>a.getCustomList("concat"))}," \u52A0\u8F7D\u66F4\u591A ")),t.isLoadAll?(o(),i("div",ie,"\u6CA1\u6709\u66F4\u591A\u4E86")):r("",!0)])):r("",!0)]))]),_:1}),f(_,{label:"\u7FA4\u804A",name:"2"},{default:v(()=>[t.groupInfo.groupList.length===0?(o(),i("div",ne,d(t.currentModel==="default"?t.groupInfo.nomsg:t.groupInfo.noSearchMsg),1)):(o(),i("div",le,[(o(!0),i(y,null,k(t.groupInfo.groupList,(s,c)=>(o(),i("div",{key:c,class:"custom-item",onClick:L=>a.selectNumber(s,2)},[m("div",re,[s.name?(o(),i("div",ce,d(s.name),1)):r("",!0),s.time?(o(),i("div",me,"\u521B\u5EFA\u65F6\u95F4"+d(s.time),1)):r("",!0)])],8,ae))),128)),t.page>1?(o(),i("div",ue,[t.isLoadAll?r("",!0):(o(),i("div",{key:0,class:"load-more",onClick:e[3]||(e[3]=s=>a.getCustomList("concat"))}," \u52A0\u8F7D\u66F4\u591A ")),t.isLoadAll?(o(),i("div",de,"\u6CA1\u6709\u66F4\u591A\u4E86")):r("",!0)])):r("",!0)]))]),_:1})]),_:1},8,["modelValue","onTabClick"])])}var ve=B(H,[["render",he],["__scopeId","data-v-69e7a1ea"]]);export{ve as default};
