
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{H as x}from"./index.94e839d6.js";import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";import{M as r,w as F,o as I,r as _,a as g,q as v,t as l,y as s,z as o,R as S,S as T,c as J,J as K,A as n,H as L}from"./vendor.d2559d84.js";const P={class:"search-box pb20"},O=L("\u91CD\u7F6E"),Q=L("\u67E5\u8BE2"),W={class:"flex pt24"},X={class:"search-tree"},Y=["onClick"],Z={class:"tab-box pl16"},ee={class:"cate-name-box fwb"},se={class:"cate-name-text"},oe={class:"flex flex-align-center"},ae=["src"],le={class:"ml8 lh24 show-line2"},te=["innerHTML"],de={props:{echoSelectGoods:{type:Array,default:()=>[]},clickEdit:{type:Boolean,default:!1}},emits:["selectGoods"],setup(z,{emit:B}){const k=z,t=r({goods_class_id:"",search_goods_name:"",search_goods_category_id:"",search_goods_stock_status:"",search_goods_status:""}),H=r({search_goods_name:"",search_goods_stock_status:"",search_goods_status:"",search_class_name:"",search_goods_category_id:""}),V=r([]),h=r(""),m=r([]),C=r([]),p=r(null);F(()=>k.clickEdit,()=>{p.value.clearSelection(),k.echoSelectGoods.forEach(a=>{p.value.toggleRowSelection(a,!0)})},{deep:!0});const E=()=>{t.value={search_goods_name:"",search_goods_category_id:"",search_goods_stock_status:"",search_goods_status:""},f()};function M(a){return a.score_goods_id}const N=async()=>{let{data:a}=await x.getGoodsTypes();V.value=a},f=async()=>{let{data:a}=await x.getGoodsCates(H.value);m.value=a,t.value.goods_class_id=m.value[0].goods_class_id,h.value=m.value[0].name,b()},b=async(a,d)=>{a&&(t.value.goods_class_id=a,h.value=d);let{data:y}=await x.getGoodsList(t.value);C.value=y},R=a=>{B("selectGoods",a)},U=a=>a.goods_type=="logistics"?"-":a.validity_time_type=="relative_time"?`\u786E\u8BA4\u5151\u6362\u540E${a.relative_days}\u5929\u5185\u53EF\u7528`:`${a.validity_start_time} \u81F3 <br/>
        ${a.validity_end_time}`,$=()=>{f(),b()};return I(()=>{N(),f()}),(a,d)=>{const y=_("el-input"),u=_("el-form-item"),c=_("el-option"),w=_("el-select"),G=_("el-button"),j=_("el-form"),i=_("el-table-column"),A=_("el-popover"),D=_("el-table");return g(),v("div",null,[l("div",P,[s(j,{inline:!0,model:t.value,"label-position":"right",size:"small",class:"search-form-margin"},{default:o(()=>[s(u,{label:"\u5546\u54C1\u540D\u79F0\uFF1A"},{default:o(()=>[s(y,{modelValue:t.value.search_goods_name,"onUpdate:modelValue":d[0]||(d[0]=e=>t.value.search_goods_name=e),placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0",class:"width-class"},null,8,["modelValue"])]),_:1}),s(u,{label:"\u5546\u54C1\u7C7B\u76EE\uFF1A",class:"ml24"},{default:o(()=>[s(w,{modelValue:t.value.search_goods_category_id,"onUpdate:modelValue":d[1]||(d[1]=e=>t.value.search_goods_category_id=e),placeholder:"\u8BF7\u9009\u62E9\u5546\u54C1\u7C7B\u76EE",class:"width-class"},{default:o(()=>[s(c,{label:"\u5168\u90E8",value:""}),(g(!0),v(S,null,T(V.value,e=>(g(),J(c,{key:e.goods_category_id,label:e.name,value:e.goods_category_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(u,{label:"\u6709\u65E0\u5E93\u5B58\uFF1A",class:"ml24"},{default:o(()=>[s(w,{modelValue:t.value.search_goods_stock_status,"onUpdate:modelValue":d[2]||(d[2]=e=>t.value.search_goods_stock_status=e),placeholder:"\u8BF7\u9009\u62E9\u5E93\u5B58",class:"width-class"},{default:o(()=>[s(c,{label:"\u5168\u90E8",value:""}),s(c,{label:"\u6709",value:"sale"}),s(c,{label:"\u552E\u7F44",value:"sold_out"})]),_:1},8,["modelValue"])]),_:1}),s(u,{label:"\u5546\u54C1\u72B6\u6001\uFF1A"},{default:o(()=>[s(w,{modelValue:t.value.search_goods_status,"onUpdate:modelValue":d[3]||(d[3]=e=>t.value.search_goods_status=e),placeholder:"\u8BF7\u9009\u62E9\u5546\u54C1\u72B6\u6001",class:"width-class"},{default:o(()=>[s(c,{label:"\u5168\u90E8",value:""}),s(c,{label:"\u4E0A\u67B6",value:"on_sale"}),s(c,{label:"\u4E0B\u67B6",value:"off_sale"})]),_:1},8,["modelValue"])]),_:1}),s(u,{class:"right mr0"},{default:o(()=>[s(G,{type:"default",size:"small",onClick:E},{default:o(()=>[O]),_:1}),s(G,{type:"primary",size:"small",onClick:$},{default:o(()=>[Q]),_:1})]),_:1})]),_:1},8,["model"])]),l("div",W,[l("div",X,[(g(!0),v(S,null,T(m.value,e=>(g(),v("div",{key:e.goods_class_id,class:"cate-box"},[l("div",{class:K(["cate-text-box pl20",[t.value.goods_class_id==e.goods_class_id?"cate-text-active":""]]),onClick:_e=>b(e.goods_class_id,e.name)},n(e.name),11,Y)]))),128))]),l("div",Z,[l("div",ee,[l("span",se,n(h.value),1)]),s(D,{ref_key:"goodsTable",ref:p,data:C.value,class:"goods-table","row-key":M,height:"calc(100vh - 380px)","header-cell-style":{background:"#f4f4f5"},onSelectionChange:R},{default:o(()=>[s(i,{type:"selection","min-width":"60","reserve-selection":!0}),s(i,{label:"\u5546\u54C1\u540D\u79F0","min-width":"240"},{default:o(e=>[l("div",oe,[l("img",{class:"goods-img flex-g0 flex-s0",src:e.row.goods_thumb_img,alt:"\u5546\u54C1\u56FE\u7247"},null,8,ae),s(A,{width:200,trigger:"hover"},{reference:o(()=>[l("div",le,n(e.row.goods_title),1)]),default:o(()=>[l("div",null,n(e.row.goods_title),1)]),_:2},1024)])]),_:1}),s(i,{label:"\u5151\u6362\u6240\u9700\u79EF\u5206","min-width":"178"},{default:o(e=>[l("div",null,n(e.row.goods_score),1)]),_:1}),s(i,{label:"\u5546\u54C1\u7C7B\u76EE","min-width":"150"},{default:o(e=>[l("div",null,n(e.row.category_name),1)]),_:1}),s(i,{label:"\u5E93\u5B58","min-width":"150"},{default:o(e=>[l("div",null,n(e.row.goods_stock),1)]),_:1}),s(i,{label:"\u5546\u54C1\u72B6\u6001","min-width":"180"},{default:o(e=>[l("div",null,n(e.row.sale_status=="on_sale"?"\u5DF2\u4E0A\u67B6":"\u5DF2\u4E0B\u67B6"),1)]),_:1}),s(i,{label:"\u6838\u9500\u65F6\u95F4","min-width":"280"},{default:o(e=>[l("div",{innerHTML:U(e.row)},null,8,te)]),_:1})]),_:1},8,["data"])])])])}}};var re=q(de,[["__scopeId","data-v-141ccf40"]]);export{re as default};
