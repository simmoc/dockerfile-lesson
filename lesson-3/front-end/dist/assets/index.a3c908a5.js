
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as D,a as T,b as q,c as A,d as E,e as H,f as L,g as R,h as F,i as G,j as K,k as P,l as J,m as Q,n as W,o as X,p as Y,q as Z}from"./word-img.bb3865fc.js";import{_ as ee}from"./drag.56588ea6.js";import{M as p,r as f,a5 as se,a as l,q as r,y as m,z as S,v as j,c as k,t as a,A as v,K as b,D as _,C,x as te,F as ae,G as ie,U as le}from"./vendor.d2559d84.js";import{H as oe}from"./index.94e839d6.js";import{_ as ne}from"./plugin-vue_export-helper.21dcd24c.js";const u=e=>(ae("data-v-93ea0bda"),e=e(),ie(),e),ce={class:"upload-container"},de={class:""},ge=u(()=>a("i",{class:"el-icon-plus"},null,-1)),re=u(()=>a("div",null," \u70B9\u51FB\u4E0A\u4F20 ",-1)),_e={class:"upload-tips"},ue={key:1,class:"image"},pe=["src"],fe={key:2,class:"file-source-content",style:"width:352px;height:72px;"},me={class:"file-img-icon"},ve={class:"file-img-icon-img"},he={class:"file-img-icon-name"},ye={class:"file-icon"},we=u(()=>a("img",{class:"video-edit-icon",src:T,alt:""},null,-1)),xe=["onClick"],ke={key:3,class:"mask"},be={class:"actions"},Be=u(()=>a("span",{title:"\u91CD\u65B0\u4E0A\u4F20"},[a("img",{src:q,alt:""})],-1)),$e=["onClick"],Se=u(()=>a("i",{class:"el-icon-delete-solid"},null,-1)),je=[Se],Ce={props:{action:{type:String,default:""},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},url:{type:String,default:""},size:{type:Number,default:2},width:{type:Number,default:150},height:{type:Number,default:150},placeholder:{type:String,default:""},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["jpg","png","gif","bmp"]},fileType:{type:Array,default:()=>["jpg","png","gif","bmp"]},type:{type:String,default:"\u56FE\u7247"}},emits:["removeUrl","on-success"],setup(e,{emit:h}){const i=e,{proxy:y}=le(),c=p(""),s=p({imageViewerVisible:!1,progress:{preview:"",percent:0},file:{file:"",file_type:"1"}}),B=p(""),w=p(!1);function V(){s.value.imageViewerVisible=!1}function $(){h("removeUrl","")}const d={"../../assets/images/knowledgeBase/cancel-x.svg":A,"../../assets/images/knowledgeBase/default_2x.svg":E,"../../assets/images/knowledgeBase/drag.svg":ee,"../../assets/images/knowledgeBase/drag_check.svg":H,"../../assets/images/knowledgeBase/edit-000.svg":L,"../../assets/images/knowledgeBase/edit-icon.svg":R,"../../assets/images/knowledgeBase/excel-img.svg":F,"../../assets/images/knowledgeBase/icon_delete_000.svg":G,"../../assets/images/knowledgeBase/icon_delete_solid.svg":K,"../../assets/images/knowledgeBase/icon_edit_solid.svg":P,"../../assets/images/knowledgeBase/pdf-img.svg":J,"../../assets/images/knowledgeBase/ppt-img.svg":Q,"../../assets/images/knowledgeBase/text-src.svg":W,"../../assets/images/knowledgeBase/video-src.svg":X,"../../assets/images/knowledgeBase/what-app-min.svg":Y,"../../assets/images/knowledgeBase/word-img.svg":Z};console.log(d);function z(t){const x=t.name.split("."),o=x[x.length-1];i.type==="\u6587\u4EF6"?(s.value.file.file_type=3,/\.(xlsx|xls|excel)$/.test(t.name)&&(c.value=d["../../assets/images/knowledgeBase/excel-img.svg"].default),/\.(docx|doc)$/.test(t.name)&&(c.value=d["../../assets/images/knowledgeBase/word-img.svg"].default),/\.(pptx|ppt)$/.test(t.name)&&(c.value=d["../../assets/images/knowledgeBase/ppt-img.svg"].default),/\.(pdf)$/.test(t.name)&&(c.value=d["../../assets/images/knowledgeBase/pdf-img.svg"].default)):i.type==="\u56FE\u7247"?s.value.file.file_type=1:s.value.file.file_type=2;const n=i.ext.indexOf(o)>=0,g=t.size/1024/1024<i.size;return i.type=="\u56FE\u7247"&&(n||y.$message.error(`\u4E0A\u4F20\u56FE\u7247\u53EA\u652F\u6301 ${i.ext.join(" / ")} \u683C\u5F0F\uFF01`),g||y.$message.error(`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${i.size}MB\uFF01`)),i.type=="\u89C6\u9891"&&(n||y.$message.error(`\u4E0A\u4F20\u89C6\u9891\u53EA\u652F\u6301 ${i.ext.join(" / ")} \u683C\u5F0F\uFF01`)),n&&g&&(s.value.progress.preview=URL.createObjectURL(t),s.value.file.file=t),n&&g}function N(t){s.value.progress.percent=~~t.percent,s.value.progress.percent==100&&setTimeout(()=>{s.value.progress.preview="",s.value.progress.percent=0},1e3)}async function U(t){console.log("res",s.value.file.filename),await h("on-success",t)}async function I(){w.value=!0,console.log("data.value.file",s.value.file);let t=await oe.fileUpload(s.value.file,[],!0);t.code===200&&(await h("on-success",t.data),B.value=t.data.file_name,w.value=!1)}return(t,x)=>{const o=f("el-image"),n=f("el-progress"),g=f("el-upload"),O=f("el-image-viewer"),M=se("loading");return l(),r("div",ce,[m(g,{"show-file-list":!1,headers:e.headers,action:e.action,data:s.value,name:e.name,"before-upload":z,"on-progress":N,"on-success":U,"http-request":I,drag:""},{default:S(()=>[e.url===""?j((l(),k(o,{key:0,src:e.url===""?e.placeholder:e.url,style:b(`width:${e.width}px;height:${e.height}px;display:flex;flex-direction:column;align-items:center;justify-content:center;`),fit:"fill"},{error:S(()=>[a("div",de,[ge,re,a("div",_e," \u652F\u6301"+v(i.type==="\u6587\u4EF6"?i.fileType.toString():e.ext.toString())+"\u683C\u5F0F"+v(i.type)+"\u5927\u5C0F\u4E0D\u80FD\u5927\u4E8E"+v(e.size)+"M ",1)])]),_:1},8,["src","style"])),[[M,w.value]]):(l(),r("div",ue,[e.type=="\u56FE\u7247"?(l(),k(o,{key:0,src:e.url,style:"width:140px;height:140px;",fit:"fill"},null,8,["src"])):_("",!0),e.type=="\u89C6\u9891"?(l(),r("video",{key:1,src:e.url,style:"width:140px;height:140px;",fit:"fill"},null,8,pe)):_("",!0),e.type=="\u6587\u4EF6"?(l(),r("div",fe,[a("div",me,[a("div",ve,[m(o,{style:{width:"40px",height:"40px"},fit:"fill",src:c.value},null,8,["src"])]),a("div",he,v(B.value),1)]),a("div",ye,[we,a("img",{class:"video-delete-icon",src:D,alt:"",onClick:C($,["stop"])},null,8,xe)])])):_("",!0),e.type!=="\u6587\u4EF6"?(l(),r("div",ke,[a("div",be,[Be,a("span",{title:"\u79FB\u9664",onClick:C($,["stop"])},je,8,$e)])])):_("",!0)])),j(a("div",{class:"progress",style:b(`width:${e.width}px;height:${e.height}px;`)},[m(o,{src:s.value.progress.preview,style:b(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),m(n,{type:"circle",width:Math.min(e.width,e.height)*.8,percentage:s.value.progress.percent},null,8,["width","percentage"])],4),[[te,s.value.progress.percent]])]),_:1},8,["headers","action","data","name"]),s.value.imageViewerVisible?(l(),k(O,{key:0,"url-list":[e.url],onClose:V},null,8,["url-list"])):_("",!0)])}}};var Oe=ne(Ce,[["__scopeId","data-v-93ea0bda"]]);export{Oe as _};
