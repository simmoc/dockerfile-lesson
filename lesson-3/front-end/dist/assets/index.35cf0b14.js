
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as pe}from"./index.f8d47027.js";import{_ as ve}from"./index.333b158c.js";import{_ as ge}from"./index.6ba23372.js";import{_ as he}from"./index.5931791c.js";import{_ as fe}from"./index.f1e12eef.js";import{P as be,M as _,o as we,r,a as h,q as B,t as o,y as l,z as a,B as xe,R as Y,S as K,c as V,A as i,H as f,D as H,F as ye,G as Ve,E as ke}from"./vendor.d2559d84.js";import{H as O}from"./index.94e839d6.js";import{o as Ce}from"./index.9dd07803.js";import{_ as De}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.a5dee889.js";import"./index.60aa6862.js";const b=k=>(ye("data-v-30f0bb6c"),k=k(),Ve(),k),ze={class:"order-page"},Oe={class:"search-form"},Ue=b(()=>o("br",null,null,-1)),Se=f("\u91CD\u7F6E"),je=f("\u67E5\u8BE2"),Ne={class:"tc flex flex-align-center"},Te=b(()=>o("span",{class:"page-tab"},"\u5F85\u53D1\u8D27",-1)),$e={class:"ml4 order-circle"},Be={class:"order-num"},He={class:"tc flex flex-align-center"},Ie=b(()=>o("span",{class:"page-tab"},"\u5DF2\u53D1\u8D27",-1)),Me={class:"ml4 order-circle"},Ee={class:"order-num"},Ge={class:"tc flex flex-align-center"},Ye=b(()=>o("span",{class:"page-tab"},"\u5DF2\u5B8C\u6210",-1)),Ke={class:"ml4 order-circle"},Re={class:"order-num"},qe={class:"overflow-ellipsis"},Fe={class:"flex flex-align-center"},Je=["src"],Pe={class:"ml8 lh24 show-line2"},Ae={class:"overflow-ellipsis"},Le={class:"time-line-height"},Qe=b(()=>o("br",null,null,-1)),We=f(" \u67E5\u770B\u8BE6\u60C5 "),Xe=f(" \u53D1\u8D27 "),Ze=f(" \u786E\u8BA4\u5B8C\u6210 "),el=b(()=>o("div",{class:"group_name"},"\u8BF7\u786E\u8BA4\u5BA2\u6237\u662F\u5426\u5DF2\u7B7E\u6536\uFF0C\u786E\u8BA4\u5B8C\u6210\u540E\u8BA2\u5355\u72B6\u6001\u5C06\u66F4\u6539\u4E3A\u5DF2\u5B8C\u6210",-1)),ll={setup(k){const R=be(),q=_([new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)]),s=_({}),C=_({}),D=_([]),p=_({page_num:1,page_size:10}),U=_(0),S=_([]),d=_("wait_send"),v=_({}),j=_(!1),I=_({}),z=_(!1),M=_(null),E=_([]),N=_(!1),F=n=>{console.log("\u5207\u6362tab\u9875",n),p.value.page_num=1,u(n)},w=async n=>{let{data:t}=await O.getOrderNum(s.value);if(v.value=t,JSON.stringify(s.value)!="{}")for(let m in v.value)if(v.value[n]!="0"){u(n);return}else if(v.value[m]!="0")if(v.value.wait_send!="0"){d.value="wait_send",u("wait_send");return}else if(v.value.has_shipped!="0"){d.value="has_shipped",u("has_shipped");return}else{d.value="has_completed",u("has_completed");return}else S.value=[],U.value=0},u=async n=>{let{data:t}=await O.getOrderData({order_status:n,page_num:p.value.page_num,page_size:p.value.page_size,search_order_no:s.value.search_order_no,search_goods_name:s.value.search_goods_name,search_goods_category_id:s.value.search_goods_category_id,search_customer_nickname:s.value.search_customer_nickname,search_customer_mobile:s.value.search_customer_mobile,search_contact_name:s.value.search_contact_name,search_contact_mobile:s.value.search_contact_mobile,search_from_convert_time:s.value.search_from_convert_time,search_to_convert_time:s.value.search_to_convert_time,search_goods_id:s.value.search_goods_id});S.value=t.list,U.value=t.total_num},J=()=>{D.value=[],s.value={},N.value=!N.value,p.value.page_num=1,p.value.page_size=10,d.value="wait_send",w(),u("wait_send")},G=()=>{JSON.stringify(C.value)!="{}"&&(s.value.search_goods_id=C.value.checkGoods.goods_id),w(d.value)},P=n=>{I.value=n,j.value=!0},A=()=>{z.value=!1},L=n=>{M.value=n,z.value=!0},Q=async()=>{(await O.getCompleteOrder({order_id:M.value})).code===200&&(ke.success({message:"\u5DF2\u5C06\u8BA2\u5355\u72B6\u6001\u66F4\u6539\u4E3A\u5DF2\u5B8C\u6210!"}),z.value=!1,d.value="wait_send",w(),u("wait_send"))},W=n=>{R.push({name:"expressOrderDetail",query:{id:n}})},X=n=>{n&&(d.value="wait_send",w(),u("wait_send"))},Z=async()=>{let{data:n}=await O.getGoodsTypes();E.value=n},ee=(n,t,m)=>{if(n&&n[0]){s.value[t]=n[0],s.value[m]=n[1];return}s.value[t]="",s.value[m]=""};return we(()=>{w(),u("wait_send"),Z()}),(n,t)=>{const m=r("el-input"),g=r("el-form-item"),le=pe,ae=r("el-date-picker"),te=r("el-option"),oe=r("el-select"),x=r("el-button"),se=r("el-form"),T=r("el-tab-pane"),ne=r("el-tabs"),$=r("el-popover"),c=r("el-table-column"),ie=r("el-timeline-item"),_e=r("el-timeline"),de=ve,re=ge,ce=he,ue=fe;return h(),B("div",ze,[o("div",Oe,[l(se,{"label-width":"120px",inline:!0,size:"small",class:"clearfix"},{default:a(()=>[l(g,{label:"\u8BA2\u5355\u7F16\u53F7:"},{default:a(()=>[l(m,{modelValue:s.value.search_order_no,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value.search_order_no=e),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u7F16\u53F7",class:"width-class",onKeyup:xe(G,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),l(g,{label:"\u5546\u54C1\u540D\u79F0:"},{default:a(()=>[l(le,{modelValue:C.value,"onUpdate:modelValue":t[1]||(t[1]=e=>C.value=e),"shop-name-close":N.value,class:"width-class"},null,8,["modelValue","shop-name-close"])]),_:1}),l(g,{label:"\u5151\u6362\u65F6\u95F4:"},{default:a(()=>[l(ae,{modelValue:D.value,"onUpdate:modelValue":t[2]||(t[2]=e=>D.value=e),type:"daterange","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4","value-format":"YYYY-MM-DD HH:mm:ss","default-time":q.value,onChange:t[3]||(t[3]=e=>ee(D.value,"search_from_convert_time","search_to_convert_time"))},null,8,["modelValue","default-time"])]),_:1}),l(g,{label:"\u5546\u54C1\u7C7B\u76EE:"},{default:a(()=>[l(oe,{modelValue:s.value.search_goods_category_id,"onUpdate:modelValue":t[4]||(t[4]=e=>s.value.search_goods_category_id=e),placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u7C7B\u76EE",class:"width-class"},{default:a(()=>[(h(!0),B(Y,null,K(E.value,e=>(h(),V(te,{key:e.goods_category_id,label:e.name,value:e.goods_category_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(g,{label:"\u5151\u6362\u4EBA\u6635\u79F0:"},{default:a(()=>[l(m,{modelValue:s.value.search_customer_nickname,"onUpdate:modelValue":t[5]||(t[5]=e=>s.value.search_customer_nickname=e),placeholder:"\u8BF7\u8F93\u5165\u5151\u6362\u4EBA\u6635\u79F0",class:"width-class"},null,8,["modelValue"])]),_:1}),l(g,{label:"\u5151\u6362\u4EBA\u624B\u673A\u53F7:"},{default:a(()=>[l(m,{modelValue:s.value.search_customer_mobile,"onUpdate:modelValue":t[6]||(t[6]=e=>s.value.search_customer_mobile=e),placeholder:"\u8BF7\u8F93\u5165\u5151\u6362\u4EBA\u624B\u673A\u53F7",class:"width-class"},null,8,["modelValue"])]),_:1}),Ue,l(g,{label:"\u6536\u8D27\u4EBA\u59D3\u540D:"},{default:a(()=>[l(m,{modelValue:s.value.search_contact_name,"onUpdate:modelValue":t[7]||(t[7]=e=>s.value.search_contact_name=e),placeholder:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA\u59D3\u540D",class:"width-class"},null,8,["modelValue"])]),_:1}),l(g,{label:"\u6536\u8D27\u4EBA\u624B\u673A\u53F7:"},{default:a(()=>[l(m,{modelValue:s.value.search_contact_mobile,"onUpdate:modelValue":t[8]||(t[8]=e=>s.value.search_contact_mobile=e),placeholder:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA\u624B\u673A\u53F7",class:"width-class"},null,8,["modelValue"])]),_:1}),l(g,{class:"right mr0"},{default:a(()=>[l(x,{type:"default",size:"small",onClick:J},{default:a(()=>[Se]),_:1}),l(x,{type:"primary",size:"small",onClick:G},{default:a(()=>[je]),_:1})]),_:1})]),_:1})]),l(ue,null,{default:a(()=>[l(ne,{modelValue:d.value,"onUpdate:modelValue":t[9]||(t[9]=e=>d.value=e),onTabClick:t[10]||(t[10]=e=>F(d.value))},{default:a(()=>[l(T,{label:"\u5F85\u53D1\u8D27",name:"wait_send"},{label:a(()=>[o("div",Ne,[Te,o("i",$e,[o("span",Be,i(v.value.wait_send),1)])])]),_:1}),l(T,{label:"\u5DF2\u53D1\u8D27",name:"has_shipped"},{label:a(()=>[o("div",He,[Ie,o("i",Me,[o("span",Ee,i(v.value.has_shipped),1)])])]),_:1}),l(T,{label:"\u5DF2\u5B8C\u6210",name:"has_completed"},{label:a(()=>[o("div",Ge,[Ye,o("i",Ke,[o("span",Re,i(v.value.has_completed),1)])])]),_:1})]),_:1},8,["modelValue"]),l(de,{"table-data":S.value,"need-pagination":!0,class:"order-table"},{default:a(()=>[l(c,{prop:"order_no",label:"\u8BA2\u5355\u7F16\u53F7","min-width":"120"},{default:a(e=>[l($,{width:200,trigger:"hover"},{reference:a(()=>[o("div",qe,i(e.row.order_no),1)]),default:a(()=>[o("div",null,i(e.row.order_no),1)]),_:2},1024)]),_:1}),l(c,{prop:"goods_title",label:"\u5546\u54C1\u540D\u79F0","min-width":"240"},{default:a(e=>[o("div",Fe,[o("img",{src:e.row.order_goods_img,class:"img-class flex-g0 flex-s0"},null,8,Je),l($,{width:200,trigger:"hover"},{reference:a(()=>[o("div",Pe,i(e.row.goods_title),1)]),default:a(()=>[o("div",null,i(e.row.goods_title),1)]),_:2},1024)])]),_:1}),d.value!=="wait_send"?(h(),V(c,{key:0,prop:"logistics_content",label:"\u7269\u6D41\u4FE1\u606F","min-width":"240"},{default:a(e=>[l($,{width:400,trigger:"click"},{reference:a(()=>[o("div",null,[o("div",null,i(e.row.logistics_content&&e.row.logistics_content[0].ftime),1),o("div",Ae,i(e.row.logistics_content&&e.row.logistics_content[0].context),1)])]),default:a(()=>[o("div",Le,[l(_e,null,{default:a(()=>[(h(!0),B(Y,null,K(e.row.logistics_content,(y,me)=>(h(),V(ie,{key:me},{default:a(()=>[f(i(y.ftime)+" ",1),Qe,f(" "+i(y.context),1)]),_:2},1024))),128))]),_:2},1024)])]),_:2},1024)]),_:1})):H("",!0),l(c,{prop:"contact_name",label:"\u6536\u8D27\u4EBA\u59D3\u540D","min-width":"102"},{default:a(e=>[o("div",null,i(e.row.contact_name),1)]),_:1}),l(c,{prop:"contact_mobile",label:"\u6536\u8D27\u4EBA\u624B\u673A\u53F7","min-width":"116"},{default:a(e=>[o("div",null,i(e.row.contact_mobile),1)]),_:1}),l(c,{prop:"goods_category_name",label:"\u5546\u54C1\u7C7B\u76EE","min-width":"90"},{default:a(e=>[o("div",null,i(e.row.goods_category_name),1)]),_:1}),l(c,{prop:"total_score",label:"\u5151\u6362\u6240\u9700\u79EF\u5206","min-width":"116"},{default:a(e=>[o("div",null,i(e.row.total_score),1)]),_:1}),l(c,{prop:"nickname",label:"\u5151\u6362\u4EBA\u6635\u79F0","min-width":"102"},{default:a(e=>[o("div",null,i(e.row.nickname),1)]),_:1}),l(c,{prop:"mobile",label:"\u5151\u6362\u4EBA\u624B\u673A\u53F7","min-width":"116"},{default:a(e=>[o("div",null,i(e.row.mobile),1)]),_:1}),l(c,{prop:"paid_time",label:"\u5151\u6362\u65F6\u95F4","min-width":"167"},{default:a(e=>[o("div",null,i(e.row.paid_time),1)]),_:1}),l(c,{label:"\u64CD\u4F5C",prop:"",fixed:"right",width:"160"},{default:a(({row:e})=>[l(x,{type:"text",size:"mini",onClick:y=>W(e.order_id)},{default:a(()=>[We]),_:2},1032,["onClick"]),d.value=="wait_send"?(h(),V(x,{key:0,type:"text",size:"mini",onClick:y=>P(e)},{default:a(()=>[Xe]),_:2},1032,["onClick"])):H("",!0),d.value=="has_shipped"?(h(),V(x,{key:1,type:"text",size:"mini",onClick:y=>L(e.order_id)},{default:a(()=>[Ze]),_:2},1032,["onClick"])):H("",!0)]),_:1})]),_:1},8,["table-data"]),l(re,{limit:p.value.page_size,"onUpdate:limit":t[11]||(t[11]=e=>p.value.page_size=e),page:p.value.page_num,"onUpdate:page":t[12]||(t[12]=e=>p.value.page_num=e),total:U.value,"get-data":()=>u(d.value)},null,8,["limit","page","total","get-data"]),l(Ce,{"dialog-visible":j.value,"onUpdate:dialog-visible":t[13]||(t[13]=e=>j.value=e),"send-deliver-data":I.value,onUpdateDeliverStatus:X},null,8,["dialog-visible","send-deliver-data"]),l(ce,{title:"\u63D0\u793A","dialog-visible":z.value,width:"450px","confirm-fn":Q,onCancel:A},{default:a(()=>[el]),_:1},8,["dialog-visible"])]),_:1})])}}};var ml=De(ll,[["__scopeId","data-v-30f0bb6c"]]);export{ml as default};
