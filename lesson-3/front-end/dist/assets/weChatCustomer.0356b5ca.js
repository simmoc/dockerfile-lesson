
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as oe,a as le,b as ne,c as _e,d as ie,e as re,f as me,g as de,h as ce,i as ge,j as pe,k as ue,l as be,m as fe,n as he,o as ye,p as we,q as ke,r as ve,s as De,t as xe,u as qe,v as Ce,w as Te,x as je,y as Ve,z as Le,A as Se,B as Fe,C as Me,D as $e,E as Ie,F as Ne,G as Re,H as Ue,I as Ee,J as Be,K as Ge,L as He,M as ze,N as Ae,O as Qe,P as Ye,Q as Ke,R as Oe,S as Pe,T as We,U as Je,V as Xe,W as Ze,X as ea,Y as aa,Z as ta,$ as sa,a0 as oa,a1 as la,a2 as na,a3 as _a}from"./welcome_check.a4153e8f.js";import{_ as ia}from"./question-circle.a23bdb5a.js";import{_ as ra}from"./select-member.d05cd3eb.js";import{_ as ma}from"./index.4a1dfaeb.js";import{_ as da}from"./index.fece4a24.js";import{_ as ca}from"./index.a5dee889.js";import{_ as ga}from"./index.333b158c.js";import{_ as pa}from"./index.6ba23372.js";import{_ as ua}from"./index.f1e12eef.js";import{P as ba,O as fa,M as L,Q as ha,a7 as ya,r as p,a as i,q as d,t as r,y as o,L as n,z as l,R as h,S as w,c as b,B as S,A as f,D as wa,H as y,F as ka,G as va,E as Da}from"./vendor.d2559d84.js";import{H as C,g as xa}from"./index.94e839d6.js";import{D as qa}from"./contant.2e72a177.js";import{_ as Ca}from"./plugin-vue_export-helper.21dcd24c.js";import"./tick@2x.1e6bc440.js";import"./vuedraggable.umd.56963d08.js";import"./sortable.esm.81321d43.js";import"./error.32433a76.js";const Ta=k=>(ka("data-v-99b71ae6"),k=k(),va(),k),ja={class:"search-form"},Va={class:"search-form-margin"},La=y("\u91CD\u7F6E"),Sa=y("\u67E5\u8BE2"),Fa=y(" \u5F53\u524D\u6709"),Ma={class:"number color-primary ml8 mr8 fwb fs18"},$a=y("\u4E2A\u5BA2\u6237\u4EBA\u6B21\uFF0C\u5171"),Ia={class:"number color-primary ml8 mr8 fwb fs18"},Na=y("\u4E2A\u5BA2\u6237 "),Ra={class:"flex flex-align-center"},Ua={class:"flex flex-align-center"},Ea=["src"],Ba={key:1,style:{width:"100%"}},Ga={key:0},Ha={class:"overflow-ellipsis",style:{display:"inline-block",width:"100%"}},za={key:1},Aa={class:"flex flex-align-center color-primary"},Qa={class:"flex flex-align-center"},Ya={key:0},Ka={class:"member-tag-pop p16"},Oa={class:"inline-flex"},Pa=Ta(()=>r("span",{class:"color-primary"},"...",-1)),Wa={key:2},Ja=y(" \u67E5\u770B\u8BE6\u60C5 "),Xa={setup(k){var j;const F=ba(),M=fa();let T=L(null);const v=L(null),a=ha({formData:{subject_id:"",search_type:"1",page:1,limit:10,deleted_state:"",qw_type:"",qw_external_name:"",qw_remark:"",addDate:[],search_department_id_arr:[],search_member_id_arr:[]},tableData:[],totalDataNum:0,isTableLoading:!1,customerTypeList:[],customerStatusList:[],companyTags:[],currentIndex:void 0,enterprise_label:[],tableTitle:[{label:"\u5BA2\u6237\u4FE1\u606F",prop:"customerType",width:200,fixed:"left",type:"slot"},{label:"\u5907\u6CE8\u540D",prop:"qw_remark",width:86,type:"tooltip"},{label:"\u6DFB\u52A0\u6765\u6E90",prop:"qw_add_way",width:230,type:"slot"},{label:"\u8DDF\u8FDB\u6210\u5458",prop:"follow_member",width:180,type:"slot"},{label:"\u4E0A\u4E0B\u6E38\u540D\u79F0",prop:"chain_name",width:210,type:"tooltip"},{label:"\u4F01\u4E1A\u540D\u79F0",prop:"chain_company",width:210,type:"tooltip"},{label:"\u5BA2\u6237\u72B6\u6001",prop:"deleted_state",width:109,type:"slot"},{label:"\u6DFB\u52A0\u65F6\u95F4",prop:"qw_createtime",width:180,type:"tooltip"},{label:"\u6807\u7B7E",prop:"tag_arr",fixed:"right",type:"slot",width:230}],customerNum:0});a.formData.subject_id=(j=M.meta)==null?void 0:j.subject_id;function $(s){return new URL({"../../../assets/images/icon/Intervento.png":oe,"../../../assets/images/icon/Intervento_check.png":le,"../../../assets/images/icon/business.png":ne,"../../../assets/images/icon/business_check.png":_e,"../../../assets/images/icon/calendar.png":ie,"../../../assets/images/icon/calendar_check.png":re,"../../../assets/images/icon/client_group.png":me,"../../../assets/images/icon/client_group_check.png":de,"../../../assets/images/icon/conversazione.png":ce,"../../../assets/images/icon/conversazione_check.png":ge,"../../../assets/images/icon/customer.png":pe,"../../../assets/images/icon/drenaggio.png":ue,"../../../assets/images/icon/drenaggio_check.png":be,"../../../assets/images/icon/event.png":fe,"../../../assets/images/icon/event_check.png":he,"../../../assets/images/icon/goods.png":ye,"../../../assets/images/icon/goods_check.png":we,"../../../assets/images/icon/integel.png":ke,"../../../assets/images/icon/integel_check.png":ve,"../../../assets/images/icon/knowledge.png":De,"../../../assets/images/icon/knowledge_check.png":xe,"../../../assets/images/icon/label.png":qe,"../../../assets/images/icon/label_check.png":Ce,"../../../assets/images/icon/label_sale.png":Te,"../../../assets/images/icon/label_sale_check.png":je,"../../../assets/images/icon/main.png":Ve,"../../../assets/images/icon/main_check.png":Le,"../../../assets/images/icon/mall.png":Se,"../../../assets/images/icon/mark.png":Fe,"../../../assets/images/icon/mark_check.png":Me,"../../../assets/images/icon/market.png":$e,"../../../assets/images/icon/member.png":Ie,"../../../assets/images/icon/member_check.png":Ne,"../../../assets/images/icon/miassion_check.png":Re,"../../../assets/images/icon/mission.png":Ue,"../../../assets/images/icon/order.png":Ee,"../../../assets/images/icon/order_check.png":Be,"../../../assets/images/icon/process.png":Ge,"../../../assets/images/icon/process_check.png":He,"../../../assets/images/icon/question-circle.png":ia,"../../../assets/images/icon/r_images.png":ze,"../../../assets/images/icon/r_images_check.png":Ae,"../../../assets/images/icon/rectangle.png":Qe,"../../../assets/images/icon/rectangle_check.png":Ye,"../../../assets/images/icon/reply.png":Ke,"../../../assets/images/icon/reply_check.png":Oe,"../../../assets/images/icon/risk.png":Pe,"../../../assets/images/icon/sale.png":We,"../../../assets/images/icon/service.png":Je,"../../../assets/images/icon/service_check.png":Xe,"../../../assets/images/icon/setting.png":Ze,"../../../assets/images/icon/setting_check.png":ea,"../../../assets/images/icon/shopping.png":aa,"../../../assets/images/icon/shopping_check.png":ta,"../../../assets/images/icon/system.png":sa,"../../../assets/images/icon/weChat.png":oa,"../../../assets/images/icon/weChat_check.png":la,"../../../assets/images/icon/welcome.png":na,"../../../assets/images/icon/welcome_check.png":_a}[`../../../assets/images/icon/${s}.png`],self.location).href}const I=s=>{const t=24*60*60*1e3,_=Date.now(),c=_-t*90;return s.getTime()>_||s.getTime()<c};function N(s){return R(s,3)||""}function R(s,t){return`${s.slice(0,t).map(_=>_.member_name||_.department_name).join("\uFF0C")}${s.length>t?"...":""}`}function U(s,t){const _=200;return t>=_?(Da({message:`\u6700\u591A\u652F\u6301\u5BA2\u6237\u4EBA\u6570${_}\u4EBA`,type:"error"}),!1):!0}function E(){v.value&&(v.value.dialogVisible=!1),a.formData.page=1,a.formData.limit=10,u()}function u(s){s&&(a.formData.page=s),a.isTableLoading=!0;const t=Object.assign({},a.formData);[t.start_time,t.end_time]=t.addDate,delete t.addDate,C.extensiveCustomerSubjectList(t).then(_=>{_.data.list&&_.data.list.forEach(c=>{c.tag_arr=[...c.tag.hq,...c.tag.service]}),a.tableData=_.data.list||[],a.totalDataNum=_.data.total||0,a.customerNum=_.data.people_num||0}).catch(()=>{}).finally(()=>{a.isTableLoading=!1})}async function B(){try{let{data:s}=await C.operationGetCustomerType();a.customerTypeList=s||[]}catch(s){console.log("operationGetCustomerType error",s)}}async function G(){try{let{data:s}=await C.operationGetCustomerStatus();a.customerStatusList=s}catch(s){console.log("operationGetCustomerStatus err",s)}}function H(){v.value.resetSelect(),T.value.resetFields(),a.formData.page=1,a.formData.limit=10,u()}function z(s,t){let _=a.formData.subject_id;F.push({name:"weChatCustomerDetail",query:{id:s,yw_id:t,subject_id:_}})}function A(s=[]){a.formData.start_time=s[0],a.formData.end_time=s[1]}function Q(s){const t=[],_=[];for(let c=0;c<s.length;c++){const g=s[c];g.type=="MEMBER"?_.push(g.id):t.push(g.id)}a.formData.search_department_id_arr=t,a.formData.search_member_id_arr=_}const Y=s=>qa[s];return ya(()=>{B(),G(),u()}),(s,t)=>{const _=p("el-option"),c=p("el-select"),g=p("el-form-item"),K=p("el-date-picker"),D=p("el-input"),O=ra,x=p("el-button"),P=p("el-form"),W=ma,V=p("el-tooltip"),J=da,q=ca,X=p("el-popover"),Z=p("el-table-column"),ee=ga,ae=pa,te=ua;return i(),d("div",null,[r("div",ja,[r("div",Va,[o(P,{ref_key:"ruleFormRef",ref:T,inline:"",size:"small","label-position":"right","label-width":"75px",model:n(a).formData,class:"clearfix"},{default:l(()=>[o(g,{label:"\u5BA2\u6237\u7C7B\u578B\uFF1A",prop:"qw_type"},{default:l(()=>[o(c,{modelValue:n(a).formData.qw_type,"onUpdate:modelValue":t[0]||(t[0]=e=>n(a).formData.qw_type=e),placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237\u7C7B\u578B",style:{width:"274px"},onChange:t[1]||(t[1]=e=>u(1))},{default:l(()=>[o(_,{label:"\u5168\u90E8",value:""}),(i(!0),d(h,null,w(n(a).customerTypeList,e=>(i(),b(_,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(g,{label:"\u6DFB\u52A0\u65F6\u95F4\uFF1A",prop:"addDate"},{default:l(()=>[o(K,{modelValue:n(a).formData.addDate,"onUpdate:modelValue":t[2]||(t[2]=e=>n(a).formData.addDate=e),type:"daterange","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4","value-format":"YYYY-MM-DD","disabled-date":I,onChange:A},null,8,["modelValue"])]),_:1}),o(g,{label:"\u8DDF\u8FDB\u6210\u5458\uFF1A",prop:"qw_userid"},{default:l(()=>[o(O,{ref_key:"addMemberDialogRef",ref:v,"input-placeholder":"\u8BF7\u9009\u62E9\u8DDF\u8FDB\u6210\u5458","is-multiple-selected":!0,"custom-input-value-fn":N,"custom-selected-fn":U,style:{width:"274px"},onConfirm:Q},{default:l(e=>[r("span",null,[o(D,{modelValue:e.data,"onUpdate:modelValue":m=>e.data=m,placeholder:"\u8BF7\u9009\u62E9","suffix-icon":"el-icon-caret-bottom",readonly:""},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},512)]),_:1}),o(g,{label:"\u5BA2\u6237\u6635\u79F0\uFF1A",prop:"qw_external_name"},{default:l(()=>[o(D,{modelValue:n(a).formData.qw_external_name,"onUpdate:modelValue":t[3]||(t[3]=e=>n(a).formData.qw_external_name=e),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u540D\u79F0",style:{width:"274px"},maxlength:"20",onKeyup:t[4]||(t[4]=S(e=>u(1),["enter"]))},null,8,["modelValue"])]),_:1}),o(g,{label:"\u5BA2\u6237\u72B6\u6001\uFF1A",prop:"deleted_state"},{default:l(()=>[o(c,{modelValue:n(a).formData.deleted_state,"onUpdate:modelValue":t[5]||(t[5]=e=>n(a).formData.deleted_state=e),placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237\u72B6\u6001",style:{width:"274px"},onChange:t[6]||(t[6]=e=>u(1))},{default:l(()=>[o(_,{label:"\u5168\u90E8",value:""}),(i(!0),d(h,null,w(n(a).customerStatusList,e=>(i(),b(_,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(g,{label:"\u5907\u6CE8\u540D\uFF1A",prop:"qw_remark"},{default:l(()=>[o(D,{modelValue:n(a).formData.qw_remark,"onUpdate:modelValue":t[7]||(t[7]=e=>n(a).formData.qw_remark=e),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u67E5\u8BE2",style:{width:"274px"},maxlength:"20",onKeyup:t[8]||(t[8]=S(e=>u(1),["enter"]))},null,8,["modelValue"])]),_:1}),o(g,{class:"right mr0"},{default:l(()=>[o(x,{disabled:n(a).isTableLoading,onClick:H},{default:l(()=>[La]),_:1},8,["disabled"]),o(x,{type:"primary",disabled:n(a).isTableLoading,onClick:E},{default:l(()=>[Sa]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])])]),o(te,null,{default:l(()=>[r("div",null,[Fa,r("span",Ma,f(n(a).totalDataNum),1),$a,r("span",Ia,f(n(a).customerNum),1),Na]),o(ee,{loading:n(a).isTableLoading,"table-title":n(a).tableTitle,"table-data":n(a).tableData},{customerType:l(e=>[r("div",Ra,[o(W,{person:{pic:e.data.qw_external_avatar,yw_name:e.data.qw_external_name,qw_type:e.data.qw_type,qw_type_str:e.data.qw_type_str,sex:e.data.qw_gender=="1"?"\u7537":e.data.qw_gender=="2"?"\u5973":"0"}},null,8,["person"])])]),qw_add_way:l(e=>[r("div",Ua,[e.data.qw_add_way=="0"?(i(),b(V,{key:0,class:"box-item",effect:"dark",content:"\u5305\u542B\u76F4\u63A5\u626B\u63CF\u6211\u7684\u4E8C\u7EF4\u7801",placement:"right"},{default:l(()=>[r("div",null,[r("span",null,f(e.data.qw_add_way_str),1),r("img",{src:$("question-circle"),alt:"",class:"icon"},null,8,Ea)])]),_:2},1024)):(i(),d("div",Ba,[e.data.qw_add_way_str?(i(),d(h,{key:0},[n(xa)(e.data.qw_add_way_str)<e.width-20?(i(),d("span",Ga,f(e.data.qw_add_way_str),1)):(i(),b(V,{key:1,content:e.data.qw_add_way_str,placement:"bottom",effect:"light"},{default:l(()=>[r("span",Ha,f(e.data.qw_add_way_str),1)]),_:2},1032,["content"]))],64)):(i(),d("div",za,"--"))]))])]),follow_member:l(e=>[r("div",Aa,[o(J,{class:"table-member-card","member-id":e.data.member_id,avatar:e.data.qw_avatar,name:e.data.qw_name,"department-name":e.data.qw_department_name},null,8,["member-id","avatar","name","department-name"])])]),deleted_state:l(e=>[r("div",Qa,[r("span",null,f(Y(e.data.deleted_state)),1)])]),tag_arr:l(e=>[e.data.tag_arr.length<=1?(i(),d("div",Ya,[(i(!0),d(h,null,w(e.data.tag_arr,m=>(i(),b(q,{key:m.id,"left-title":m.group_name,"right-title":m.name,color:m.tag_type==="HQ"?"#409eff":"#FF6F00","customer-style":{"margin-bottom":0}},null,8,["left-title","right-title","color"]))),128))])):(i(),b(X,{key:1,placement:"bottom",trigger:"click","popper-class":"key-word-pop",width:"542"},{reference:l(()=>[r("div",Oa,[o(q,{"left-title":e.data.tag_arr[0].group_name,"right-title":e.data.tag_arr[0].name,color:e.data.tag_arr[0].tag_type==="HQ"?"#409eff":"#FF6F00","customer-style":{"margin-bottom":0}},null,8,["left-title","right-title","color"]),Pa])]),default:l(()=>[r("div",Ka,[(i(!0),d(h,null,w(e.data.tag_arr,m=>(i(),b(q,{key:m.id,"left-title":m.group_name,"right-title":m.name,color:m.tag_type==="HQ"?"#409eff":"#FF6F00","right-text-break":!1,"right-text-auto":!0},null,8,["left-title","right-title","color"]))),128))])]),_:2},1024)),e.data.tag_arr[0]?wa("",!0):(i(),d("div",Wa,"--"))]),label:l(e=>[(i(!0),d(h,null,w(e.data.label,(m,se)=>(i(),d("div",{key:se,class:"company-tag"},f(m),1))),128))]),default:l(()=>[o(Z,{label:"\u64CD\u4F5C",width:"100px",fixed:"right"},{default:l(({row:e})=>[r("div",null,[o(x,{type:"text",onClick:m=>z(e.subject_data_id,e.yw_id)},{default:l(()=>[Ja]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["loading","table-title","table-data"]),o(ae,{page:n(a).formData.page,"onUpdate:page":t[9]||(t[9]=e=>n(a).formData.page=e),limit:n(a).formData.limit,"onUpdate:limit":t[10]||(t[10]=e=>n(a).formData.limit=e),total:n(a).totalDataNum,"get-data":u},null,8,["page","limit","total"])]),_:1})])}}};var bt=Ca(Xa,[["__scopeId","data-v-99b71ae6"]]);export{bt as default};
