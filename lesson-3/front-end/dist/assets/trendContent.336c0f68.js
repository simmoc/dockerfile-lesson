
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{d as Y,_ as A,a as C,b as V,c as U,e as D,f as P,g as F}from"./contant.2e72a177.js";import{e as G}from"./error.32433a76.js";import{_ as Z}from"./index.a5dee889.js";import{M as x,o as ss,r as L,a as o,q as l,t as w,R as K,S as $,J as j,c as z,L as es,D as n,A as k,C as ts,y as R,z as T}from"./vendor.d2559d84.js";import"./plugin-vue_export-helper.21dcd24c.js";var u="./assets/LINK.4d7bd313.svg",d="./assets/MINIPROGRAM.5c3e22ab.svg",_="./assets/VIDEO.21fd94c3.svg",v="./assets/delete_icon.4e72c1ff.svg",p="./assets/excel.c40d49bc.svg",f="./assets/pdf.9cd7c979.svg",h="./assets/ppt.6563761a.svg",y="./assets/word.7f2b559a.svg";const as={class:"trend-item-content flex-g1 flex-s1"},os={class:"normal-trend flex flex-align-center flex-wrap"},ls=["src"],rs={key:2},cs={key:5,class:"pt8"},is={key:0,class:"conten-text pl8 pr8 lh22 bgf"},ns={class:"show-line2"},gs={key:1,class:"flex flex-align-center flex-wrap"},ms=["onClick"],us=["src"],ds=["src"],_s=["src"],vs={key:3,class:"media-item-title"},ps={class:"el-dialog__body flex flex-justify-center"},fs={id:"videoPlyer",class:"el-dialog__body"},hs=["src"],Ls={props:{trendItem:{type:Object,default:()=>{}}},setup(O){const q=O,M=x([]),I=x(!1),b=x(!1),g=x(""),B=async s=>{let a=[],c=/\((.*?)\)/g;for(s.matchContentArr=[],s.rcontent_text=s.content_text;a=c.exec(s.content_text);){let t=a[0].match(/\(([^)]*)\)/);s.content[t[1]]&&(s.rcontent_text=s.rcontent_text.replace(t[0],"$"),s.matchContentArr.push({key:t[1],data:s.content[t[1]]}))}M.value=await S(s,"$",s.matchContentArr)},S=(s,a,c)=>{let t=s.rcontent_text,i=t.split(a),m=t.indexOf(a),e=-1;for(;m!==-1;)e++,i[e]?(i.splice(e+1,0,c.shift()),e++):i.splice(e,1,c.shift()),m=t.indexOf(a,m+1);return s.content_arr=i,Promise.resolve(i)},J=s=>typeof s,N=()=>{I.value=!1,b.value=!1,g.value=""},H=s=>{if(s.type==="LINK"){let a=s.link_url.indexOf("http")===-1?"https://":"";window.open(a+s.link_url)}s.type==="FILE"&&window.open(s.file_url),s.type==="IMAGE"&&(g.value=s.file_url,I.value=!0),s.type==="VIDEO"&&(g.value=s.file_url,b.value=!0)},E=s=>{let a="";return["\u7537","man",1,"1"].includes(s)?(a="man",new URL({"../../../../assets/images/customer/email.svg":A,"../../../../assets/images/customer/error.svg":G,"../../../../assets/images/customer/link_icon.svg":C,"../../../../assets/images/customer/man.svg":V,"../../../../assets/images/customer/no_trend.svg":U,"../../../../assets/images/customer/ognization.svg":D,"../../../../assets/images/customer/phone.svg":P,"../../../../assets/images/customer/women.svg":F}[`../../../../assets/images/customer/${a}.svg`],self.location).href):["\u5973","woman",2,"2"].includes(s)?(a="women",new URL({"../../../../assets/images/customer/email.svg":A,"../../../../assets/images/customer/error.svg":G,"../../../../assets/images/customer/link_icon.svg":C,"../../../../assets/images/customer/man.svg":V,"../../../../assets/images/customer/no_trend.svg":U,"../../../../assets/images/customer/ognization.svg":D,"../../../../assets/images/customer/phone.svg":P,"../../../../assets/images/customer/women.svg":F}[`../../../../assets/images/customer/${a}.svg`],self.location).href):""},Q=s=>new URL({"../../../../assets/images/customer/media/LINK.svg":u,"../../../../assets/images/customer/media/MINIPROGRAM.svg":d,"../../../../assets/images/customer/media/VIDEO.svg":_,"../../../../assets/images/customer/media/delete_icon.svg":v,"../../../../assets/images/customer/media/excel.svg":p,"../../../../assets/images/customer/media/pdf.svg":f,"../../../../assets/images/customer/media/ppt.svg":h,"../../../../assets/images/customer/media/word.svg":y}[`../../../../assets/images/customer/media/${s}.svg`],self.location).href,W=s=>{if(!s.file_url&&s.type=="LINK")return new URL("./assets/default_2x.dc84e0a4.svg",self.location).href;let a="";if(s.file_url){let t=s.file_url.split(".");a=t[t.length-1]}if(s.type=="FILE"&&["doc","docx"].includes(a)){let t="word";return new URL({"../../../../assets/images/customer/media/LINK.svg":u,"../../../../assets/images/customer/media/MINIPROGRAM.svg":d,"../../../../assets/images/customer/media/VIDEO.svg":_,"../../../../assets/images/customer/media/delete_icon.svg":v,"../../../../assets/images/customer/media/excel.svg":p,"../../../../assets/images/customer/media/pdf.svg":f,"../../../../assets/images/customer/media/ppt.svg":h,"../../../../assets/images/customer/media/word.svg":y}[`../../../../assets/images/customer/media/${t}.svg`],self.location).href}else if(s.type=="FILE"&&["pdf"].includes(a)){let t="pdf";return new URL({"../../../../assets/images/customer/media/LINK.svg":u,"../../../../assets/images/customer/media/MINIPROGRAM.svg":d,"../../../../assets/images/customer/media/VIDEO.svg":_,"../../../../assets/images/customer/media/delete_icon.svg":v,"../../../../assets/images/customer/media/excel.svg":p,"../../../../assets/images/customer/media/pdf.svg":f,"../../../../assets/images/customer/media/ppt.svg":h,"../../../../assets/images/customer/media/word.svg":y}[`../../../../assets/images/customer/media/${t}.svg`],self.location).href}else if(s.type=="FILE"&&["xlsx","xls"].includes(a)){let t="excel";return new URL({"../../../../assets/images/customer/media/LINK.svg":u,"../../../../assets/images/customer/media/MINIPROGRAM.svg":d,"../../../../assets/images/customer/media/VIDEO.svg":_,"../../../../assets/images/customer/media/delete_icon.svg":v,"../../../../assets/images/customer/media/excel.svg":p,"../../../../assets/images/customer/media/pdf.svg":f,"../../../../assets/images/customer/media/ppt.svg":h,"../../../../assets/images/customer/media/word.svg":y}[`../../../../assets/images/customer/media/${t}.svg`],self.location).href}else if(s.type=="FILE"&&["pptx","ppt"].includes(a)){let t="ppt";return new URL({"../../../../assets/images/customer/media/LINK.svg":u,"../../../../assets/images/customer/media/MINIPROGRAM.svg":d,"../../../../assets/images/customer/media/VIDEO.svg":_,"../../../../assets/images/customer/media/delete_icon.svg":v,"../../../../assets/images/customer/media/excel.svg":p,"../../../../assets/images/customer/media/pdf.svg":f,"../../../../assets/images/customer/media/ppt.svg":h,"../../../../assets/images/customer/media/word.svg":y}[`../../../../assets/images/customer/media/${t}.svg`],self.location).href}return(s.file_url.indexOf("http")===-1?"https://":"")+s.file_url};return ss(()=>{B(q.trendItem)}),(s,a)=>{const c=L("el-avatar"),t=Z,i=L("el-image"),m=L("el-dialog");return o(),l("div",as,[w("div",os,[(o(!0),l(K,null,$(M.value,(e,X)=>(o(),l("div",{key:X,class:j(["mr4 lh32",["content"].includes(e.key)?"script-content":""])},[["member_img","customer_img"].includes(e.key)?(o(),z(c,{key:0,class:"mr4 block",shape:"square",size:32,src:e.data.value||es(Y)},null,8,["src"])):n("",!0),["customer_gender"].includes(e.key)&&E(e.data.value)?(o(),l("img",{key:1,src:E(e.data.value),class:"sex-img mr4",alt:""},null,8,ls)):J(e)=="string"?(o(),l("span",rs,k(e),1)):["customer_type"].includes(e.key)?(o(),l("span",{key:3,class:j([e.data.value=="@\u5FAE\u4FE1"?"text-green":"text-yellow"])},k(e.data.value),3)):e.data.type=="TAG"?(o(),z(t,{key:4,"left-title":e.data.value.group_name,"right-title":e.data.value.tag_name,color:["tag_mark_hq","unmark_hq"].includes(O.trendItem.class_type)?"#409eff":"#FF6F00","customer-style":{"margin-bottom":0,"margin-top":0}},null,8,["left-title","right-title","color"])):["content"].includes(e.key)?(o(),l("div",cs,[e.data.value.content?(o(),l("div",is,[w("p",ns,k(e.data.value.content),1)])):n("",!0),e.data.value.file_arr&&e.data.value.file_arr.length?(o(),l("div",gs,[(o(!0),l(K,null,$(e.data.value.file_arr,r=>(o(),l("div",{key:r.file_id,class:"media-item pointer mt8",onClick:ts(ys=>H(r),["stop"])},[r.type!=="VIDEO"?(o(),l("img",{key:0,class:"cover-img",src:W(r)},null,8,us)):(o(),l("video",{key:1,class:"cover-img",fit:"fill",src:r.file_url},null,8,ds)),["VIDEO","MINIPROGRAM","LINK"].includes(r.type)?(o(),l("img",{key:2,class:"play-icon",src:Q(r.type),alt:"paly"},null,8,_s)):n("",!0),["LINK","MINIPROGRAM","FILE"].includes(r.type)?(o(),l("div",vs,k(r.title||r.qw_link_title||r.qw_miniprogram_title||r.file_name),1)):n("",!0)],8,ms))),128))])):n("",!0)])):n("",!0)],2))),128))]),R(m,{"model-value":I.value,title:"\u56FE\u7247\u9884\u89C8","custom-class":"sop-add-other-content-dialog",width:"648px","close-on-click-modal":!1,"close-on-press-escape":!1,onClose:N},{default:T(()=>[w("div",ps,[R(i,{style:{height:"100%"},src:g.value},null,8,["src"])])]),_:1},8,["model-value"]),R(m,{"model-value":b.value,title:"\u89C6\u9891\u9884\u89C8","custom-class":"sop-add-other-content-dialog",width:"648px",onClose:N},{default:T(()=>[w("div",fs,[g.value?(o(),l("video",{key:0,src:g.value,controls:"controls",style:{width:"100%",height:"100%"}}," \u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u89C6\u9891\u64AD\u653E ",8,hs)):n("",!0)])]),_:1},8,["model-value"])])}}};export{Ls as default};
