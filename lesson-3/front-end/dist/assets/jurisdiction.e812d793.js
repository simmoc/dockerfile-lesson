
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as G}from"./index.333b158c.js";import{_ as P}from"./index.6ba23372.js";import{_ as Q}from"./index.5931791c.js";import{_ as q}from"./index.f1e12eef.js";import{M as a,P as J,Q as K,r as M,a as x,c as y,z as l,t as r,y as s,L as W,D,F as X,G as Y,H as f,E as $}from"./vendor.d2559d84.js";import{H as v}from"./index.94e839d6.js";import{_ as Z}from"./select-member.d05cd3eb.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";import"./tick@2x.1e6bc440.js";import"./vuedraggable.umd.56963d08.js";import"./sortable.esm.81321d43.js";const C=m=>(X("data-v-5b233899"),m=m(),Y(),m),te={class:"title"},oe=C(()=>r("span",null,"\u89D2\u8272\u5217\u8868",-1)),ae=f("+ \u65B0\u5EFA\u89D2\u8272"),le=f(" \u67E5\u770B\u6743\u9650 "),ne=["onClick"],se=C(()=>r("span",null,"\u5173\u8054\u6210\u5458",-1)),ie=f(" \u7F16\u8F91 "),re=f(" \u5220\u9664 "),ce=C(()=>r("div",{class:"group_name"},"\u662F\u5426\u5220\u9664\u8BE5\u89D2\u8272?",-1)),de={setup(m){const B=a(null),E=J(),I=a([{label:"\u89D2\u8272\u540D\u79F0",prop:"name"},{label:"\u5173\u8054\u6210\u5458\u6570",prop:"member_count"},{label:"\u6700\u540E\u4FEE\u6539\u65F6\u95F4",prop:"update_time"}]),h=a([]),j=a(0),g=a(1),k=a(10),c=K({}),u=a(!1),R=a("");let i=a([]);const V=a(!1),w=(e,t)=>{E.push({name:e,query:t})},p=async()=>{let{data:e}=await v.systemRoles({page:g.value,page_size:k.value});h.value=e.list,j.value=e.count},z=e=>{u.value=!0,R.value=e},A=async()=>{let e=await v.deleteRole({id:R.value},[],!0);e.code===0&&($.success(e.data),u.value=!1,p()),console.log(e)},N=()=>{u.value=!1},S=(e,t)=>{console.log(e),i.value=e;var n=[],b=[];console.log(t),i&&Array.isArray(e)&&i.value.map(d=>{d.isOrg?b.push(d.id):n.push(d.id)}),c.member_ids=n,c.department_ids=b,L(c)},T=(e,t)=>{c.role_id=e,V.value=t>0,H(c.role_id)},H=async e=>{let t=await v.roleMember({role_id:e});t.code===0&&(i.value=t.data,console.log(i))},L=async e=>{let t=await v.editRoleMember(e);t.code===0&&($.success(t.data),p())};return p(),(e,t)=>{const n=M("el-button"),b=M("el-table-column"),d=G,O=P,U=Q,F=q;return x(),y(F,null,{default:l(()=>[r("div",te,[oe,s(n,{type:"primary",size:"mini",onClick:t[0]||(t[0]=o=>w("addRole"))},{default:l(()=>[ae]),_:1})]),s(d,{"table-title":I.value,"table-data":h.value,"need-pagination":!0},{default:l(()=>[s(b,{label:"\u64CD\u4F5C",width:"300px"},{default:l(o=>[r("div",null,[s(n,{type:"text",onClick:_=>w("checkRole",{id:o.row.id,name:o.row.name,type:"checked"})},{default:l(()=>[le]),_:2},1032,["onClick"]),r("div",{class:"el-button el-button--text el-button--large",onClick:_=>T(o.row.id,o.row.member_count)},[s(Z,{ref_key:"addMemberDialogRef",ref:B,"write-back-selected-member-org":W(i),params:{touch_object:"ALL_MEMBER"},onConfirm:_=>S(_,o.$index)},{default:l(()=>[se]),_:2},1032,["write-back-selected-member-org","onConfirm"])],8,ne),o.row.name!=="\u8D85\u7EA7\u7BA1\u7406\u5458"?(x(),y(n,{key:0,type:"text",onClick:_=>w("editRole",{id:o.row.id,name:o.row.name,type:"edit"})},{default:l(()=>[ie]),_:2},1032,["onClick"])):D("",!0),o.row.name!=="\u8D85\u7EA7\u7BA1\u7406\u5458"?(x(),y(n,{key:1,type:"text",onClick:_=>z(o.row.id)},{default:l(()=>[re]),_:2},1032,["onClick"])):D("",!0)])]),_:1})]),_:1},8,["table-title","table-data"]),s(O,{page:g.value,"onUpdate:page":t[1]||(t[1]=o=>g.value=o),limit:k.value,"onUpdate:limit":t[2]||(t[2]=o=>k.value=o),total:j.value,"get-data":p},null,8,["page","limit","total"]),s(U,{title:"\u63D0\u793A","dialog-visible":u.value,width:"400px","confirm-fn":A,onCancel:N},{default:l(()=>[ce]),_:1},8,["dialog-visible"])]),_:1})}}};var ye=ee(de,[["__scopeId","data-v-5b233899"]]);export{ye as default};
