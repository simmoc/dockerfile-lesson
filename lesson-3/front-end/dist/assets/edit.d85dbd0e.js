
/**
 * 由 Fantastic-admin 提供技术支持
 * https://hooray.gitee.io/fantastic-admin/
 * Powered by Fantastic-admin
 * https://hooray.github.io/fantastic-admin/
 */
    
import{_ as se}from"./index.60aa6862.js";import{_ as oe}from"./index.c2096f13.js";import{_ as ae}from"./index.f1e12eef.js";import{_ as de}from"./index.5931791c.js";import ie from"./typeSelect.b65fc8d3.js";import{b as _e,H as V}from"./index.94e839d6.js";import{P as ne,O as ue,M as r,o as re,r as u,a as g,q as p,t as s,A as k,D as C,y as t,z as a,R as ce,S as me,c as $,L as D,F as ge,G as ve,H as B,a6 as pe,E as f}from"./vendor.d2559d84.js";import{_ as fe}from"./plugin-vue_export-helper.21dcd24c.js";import"./vuedraggable.umd.56963d08.js";import"./sortable.esm.81321d43.js";import"./drag.56588ea6.js";var ye="./assets/miniprogram.13b6d12d.svg";const i=q=>(ge("data-v-2e707efc"),q=q(),ve(),q),he={class:"pt20"},be={class:"page-scroll"},we={key:0,class:"head-content mt0 mr16"},xe={class:"head-content-item"},Ve={class:"head-content-item"},ke={class:"head-content-item"},qe={class:"head-content-item"},Ce={class:"col-width"},Ue={class:"col-width"},Te={class:"col-width"},je={class:"col-width"},Me=i(()=>s("div",{class:"mt8 c8c fs12"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A800*800\u50CF\u7D20\uFF0C\u4F60\u53EF\u4EE5\u62D6\u62FD\u56FE\u7247\u8C03\u6574\u987A\u5E8F\uFF0C\u6700\u591A\u4E0A\u4F209\u5F20",-1)),Ge={class:"col-width"},ze=i(()=>s("div",{class:"mt8 c8c fs12"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A310*310\u50CF\u7D20\uFF0C\u4E0D\u4F20\u5219\u9ED8\u8BA4\u4E3A\u5546\u54C1\u8BE6\u60C5\u9876\u90E8\u56FE\u7684\u7B2C\u4E00\u5F20\u56FE",-1)),De={class:"col-width relative"},Se=i(()=>s("div",{class:"mt8 c8c fs12"},"\u8BE5\u6807\u9898\u4E3A\u5206\u4EAB\u5546\u54C1\u65F6\u663E\u793A\u7684\u6807\u9898\uFF0C\u4E0D\u586B\u5219\u9ED8\u8BA4\u4E3A\u5546\u54C1\u540D\u79F0",-1)),Ie={class:"preview-mini pt16 pl16 pr16"},Le={class:"mini-title show-line2 fwb fs14 c26 mb8"},$e={class:"mini-bg-img"},Be=["src"],Fe=i(()=>s("div",{class:"mini-birder mt16"},null,-1)),He=i(()=>s("div",{class:"flex mini-icon-box flex-align-center"},[s("img",{class:"mini_icon",src:ye,alt:""}),s("span",{class:"c8c fs14 ml8"},"\u5C0F\u7A0B\u5E8F")],-1)),Ne={class:"col-width"},Ee=i(()=>s("div",{class:"mt8 c8c fs12"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A420*336\u50CF\u7D20\uFF0C\u4E0D\u4F20\u5219\u9ED8\u8BA4\u4E3A\u5546\u54C1\u8BE6\u60C5\u9876\u90E8\u56FE\u7684\u7B2C\u4E00\u5F20\u56FE",-1)),Re={class:"col-width"},Ye=i(()=>s("div",{class:"mt8 c8c fs12"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A120*120\u50CF\u7D20\uFF0C\u4E0D\u4F20\u5219\u9ED8\u8BA4\u4E3A\u5546\u54C1\u8BE6\u60C5\u9876\u90E8\u56FE\u7684\u7B2C\u4E00\u5F20\u56FE",-1)),Ke={class:"pt8"},Ae={class:"col-width"},Oe=i(()=>s("div",{class:"tc",style:{width:"27px"}},"\u79EF\u5206",-1)),Pe={class:"col-width"},Je=i(()=>s("div",{class:"tc",style:{width:"27px"}},"\u4EF6",-1)),Qe={class:"pt8"},We={class:"col-width"},Xe=i(()=>s("div",{class:"mt8 c8c fs12"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A800*\u9AD8\u5EA6\u4E0D\u9650\uFF0C\u6700\u591A\u4E0A\u4F2010\u5F20",-1)),Ze={key:0,class:"pt8"},el={class:"col-width"},ll=i(()=>s("span",{class:"mr8 c26"},"\u786E\u8BA4\u5151\u6362\u540E",-1)),tl=i(()=>s("span",{class:"ml8 c26"},"\u5929\u5185\u53EF\u7528",-1)),sl=i(()=>s("br",null,null,-1)),ol=i(()=>s("span",{class:"mr8 c26"},"\u5728",-1)),al=i(()=>s("span",{class:"ml8 c26"},"\u5185\u53EF\u7528",-1)),dl={class:"col-width"},il={key:0,class:"alert-info flex pl16 flex-align-center"},_l=i(()=>s("i",{class:"el-icon-warning color-primary fs14"},null,-1)),nl=i(()=>s("div",{class:"info-test fs14 cl26 ml8"},"\u6E29\u99A8\u63D0\u793A\uFF1A\u63D0\u4EA4\u540E\u9ED8\u8BA4\u4E3A\u4E0A\u67B6\u72B6\u6001",-1)),ul=[_l,nl],rl={key:1,class:"alert-info-yellow flex pl16 flex-align-center"},cl=i(()=>s("i",{class:"el-icon-warning warning-yellow fs14"},null,-1)),ml=i(()=>s("div",{class:"info-test fs14 cl26 ml8"},"\u6E29\u99A8\u63D0\u793A\uFF1A\u63D0\u4EA4\u540E\u9ED8\u8BA4\u4E3A\u4E0B\u67B6\u72B6\u6001",-1)),gl=[cl,ml],vl={class:"mt24 tr"},pl=B("\u53D6\u6D88"),fl=B("\u63D0\u4EA4"),yl=i(()=>s("div",null," \u5F53\u524D\u9875\u9762\u672A\u4FDD\u5B58\uFF0C\u8BF7\u786E\u8BA4\u662F\u5426\u5173\u95ED\u8BE5\u9875\u9762? ",-1)),hl={setup(q){const U=ne(),y=ue(),T=r(!1),c=r("add"),e=r({goods_category_id:"",goods_class_id_arr:[],goods_title:"",goods_sub_title:"",goods_img:[],goods_type:"",goods_stock:"",goods_score:"",goods_thumb_img:"",goods_share_img:"",goods_share_title:"",goods_order_img:"",goods_details_img:[],is_validity_time_type:"",relative_days:"",validity_start_time:"",validity_end_time:""}),j=r(null),F=r([new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)]),h=r({goods_title:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0",trigger:"blur"}],goods_category_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u5546\u54C1\u7C7B\u76EE",trigger:"change"}],goods_class_id_arr:[{type:"array",required:!0,message:"\u8BF7\u9009\u62E9\u5546\u54C1\u5206\u7C7B",trigger:"blur"}],goods_img:[{type:"array",required:!0,message:"\u8BF7\u4E0A\u4F20\u5546\u54C1\u8BE6\u60C5\u9875\u9876\u90E8\u56FE",trigger:"upload"}],goods_details_img:[{type:"array",required:!0,message:"\u8BF7\u4E0A\u4F20\u5546\u54C1\u8BE6\u60C5\u56FE",trigger:"change"}]}),H=r({search_class_name:"",search_goods_name:"",search_goods_category_id:"",search_goods_status:"",search_goods_stock_status:""}),S=r([]),b=r([]),v=r([]),M=_e((d,l)=>{let m=new RegExp("^[0-9]([0-9])*$").test(d);console.log(d,m),m||(e.value[l]=d.replace(/[^[0-9]]*/g,""))},100),G=async()=>{const{data:d}=await V.getGoodsTypes();b.value=d||[],c.value=="add"?(e.value.goods_type=b.value[0].type||"",e.value.goods_category_id=b.value[0].goods_category_id||"",pe(()=>{j.value.clearValidate("goods_category_id")})):c.value=="edit"&&(b.value=d.filter(l=>l.goods_category_id==e.value.goods_category_id))},N=async()=>{let{data:d,code:l}=await V.getGoodsCates(H.value);l==200&&(S.value=d||[])},z=(d,l)=>{e.value[d]=l[0]||""},E=()=>{if(v.value&&v.value[0]){e.value.validity_start_time=v.value[0],e.value.validity_end_time=v.value[1];return}e.value.validity_start_time="",e.value.validity_end_time=""},R=async d=>{const{code:l,data:m}=await V.getGoodsDetail({goods_id:d});l==200&&(e.value=m||{},e.value.goods_id=d,v.value[0]=e.value.validity_start_time,v.value[1]=e.value.validity_end_time,G())},Y=async()=>{const{code:d}=await V.addGoods(e.value);d==200&&(f.success({message:"\u6DFB\u52A0\u5546\u54C1\u6210\u529F"}),U.push({path:"/integelMall/goodsManage/",query:{goods_id:e.value.goods_id,goods_class_id:y.query.goods_class_id||""}}))},K=async()=>{delete e.value.last_update_user,delete e.value.create_member,delete e.value.last_update_member,delete e.value.last_update_user;const{code:d}=await V.updateGoods(e.value);d==200&&(f.success({message:"\u7F16\u8F91\u5546\u54C1\u6210\u529F"}),U.push({path:"/integelMall/goodsManage/",query:{goods_id:e.value.goods_id,goods_class_id:y.query.goods_class_id}}))},A=()=>{j.value.validate((d,l)=>{if(console.log(d,l),!d)return console.log("error submit!!"),!1});for(let d in e.value)if(Object.prototype.toString.call(e.value[d])==="[object Array]"&&h.value[d]){if(!e.value[d][0]){f.warning(h.value[d][0].message);return}}else if(h.value[d]&&!e.value[d]){f.warning(h.value[d][0].message);return}if(console.log(e.value.goods_type,e.value.is_validity_time_type,e.value.validity_start_time),e.value.goods_type==" arrival"){if(!e.value.is_validity_time_type){f.warning("\u8BF7\u9009\u62E9\u6838\u9500\u65F6\u95F4\u5E76\u586B\u5165\u65E5\u671F");return}if(e.value.is_validity_time_type=="relative_time"&&!e.value.relative_days){f.warning("\u8BF7\u9009\u62E9\u6838\u9500\u65F6\u95F4\u5929\u6570");return}else if(e.value.is_validity_time_type=="absolute_time"&&!e.value.validity_start_time){f.warning("\u8BF7\u9009\u62E9\u6838\u9500\u5F00\u59CB\u4E0E\u7ED3\u675F\u65F6\u95F4");return}}c.value=="add"?Y():c.value=="edit"&&K()},O=()=>{T.value=!0},P=()=>{U.push({path:"/integelMall/goodsManage/",query:{goods_class_id:y.query.goods_class_id||""}})};return re(()=>{c.value=y.query.pageType||"",N(),c.value=="add"?(e.value.goods_class_id_arr[0]=y.query.goods_class_id-0,G()):c.value=="edit"&&R(y.query.goods_id)}),(d,l)=>{const m=se,_=u("el-form-item"),J=u("el-option"),Q=u("el-select"),n=u("el-row"),w=u("el-input"),x=oe,W=u("el-input-number"),I=u("el-radio"),X=u("el-date-picker"),Z=u("el-radio-group"),L=u("el-button"),ee=u("el-form"),le=ae,te=de;return g(),p("div",he,[s("div",be,[c.value=="edit"?(g(),p("div",we,[s("div",xe," \u521B\u5EFA\u6210\u5458\uFF1A"+k(e.value&&e.value.creator_name||e.value&&e.value.member_name||"\u2014"),1),s("div",Ve," \u521B\u5EFA\u65F6\u95F4\uFF1A"+k(e.value&&e.value.create_time||"\u2014"),1),s("div",ke," \u6700\u540E\u4FEE\u6539\u6210\u5458\uFF1A"+k(e.value&&e.value.member_name||"\u2014"),1),s("div",qe," \u6700\u540E\u4FEE\u6539\u65F6\u95F4\uFF1A"+k(e.value&&e.value.update_time||"\u2014"),1)])):C("",!0),t(le,{class:"mr16 mt0"},{default:a(()=>[s("div",null,[t(m,{title:"\u57FA\u672C\u4FE1\u606F"})]),t(ee,{ref_key:"ruleForm",ref:j,model:e.value,rules:h.value,size:"small",class:"demo-ruleForm",height:"32px","label-width":"520px","label-position":"top"},{default:a(()=>[t(_,{label:"\u5546\u54C1\u7C7B\u76EE",prop:"goods_category_id"},{default:a(()=>[t(ie,{typeId:e.value.goods_category_id,"onUpdate:typeId":l[0]||(l[0]=o=>e.value.goods_category_id=o),goodsType:e.value.goods_type,"onUpdate:goodsType":l[1]||(l[1]=o=>e.value.goods_type=o),"type-list":b.value,"can-select":c.value=="edit",onGetTypeList:G},null,8,["typeId","goodsType","type-list","can-select"])]),_:1}),t(_,{label:"\u5546\u54C1\u5206\u7C7B",prop:"goods_class_id_arr"},{default:a(()=>[t(n,null,{default:a(()=>[s("div",Ce,[t(Q,{modelValue:e.value.goods_class_id_arr,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.goods_class_id_arr=o),"el-select":"",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u5206\u7C7B","no-match-text":"no data","no-data-text":"no data",style:{width:"100%"},multiple:"",clearable:""},{default:a(()=>[(g(!0),p(ce,null,me(S.value,o=>(g(),$(J,{key:o.goods_class_id,value:o.goods_class_id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1}),t(_,{label:"\u5546\u54C1\u540D\u79F0",prop:"goods_title"},{default:a(()=>[t(n,null,{default:a(()=>[s("div",Ue,[t(w,{modelValue:e.value.goods_title,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.goods_title=o),size:"small","show-word-limit":"",maxlength:"50",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0"},null,8,["modelValue"])])]),_:1})]),_:1}),t(_,{label:"\u5546\u54C1\u526F\u6807\u9898"},{default:a(()=>[t(n,null,{default:a(()=>[s("div",Te,[t(w,{modelValue:e.value.goods_sub_title,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.goods_sub_title=o),size:"small","show-word-limit":"",maxlength:"50",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u526F\u6807\u9898"},null,8,["modelValue"])])]),_:1})]),_:1}),t(_,{required:"",label:"\u5546\u54C1\u8BE6\u60C5\u9875\u9876\u90E8\u56FE",prop:"goods_img"},{default:a(()=>[t(n,null,{default:a(()=>[s("div",je,[t(x,{url:e.value.goods_img,"onUpdate:url":l[5]||(l[5]=o=>e.value.goods_img=o),max:9,width:80,height:80},null,8,["url"]),Me])]),_:1})]),_:1}),t(_,{label:"\u5546\u54C1\u5217\u8868\u56FE"},{default:a(()=>[t(n,null,{default:a(()=>[s("div",Ge,[t(x,{url:e.value.goods_thumb_img?[e.value.goods_thumb_img]:[],max:1,width:80,height:80,onUrlChange:l[6]||(l[6]=o=>z("goods_thumb_img",o))},null,8,["url"]),ze])]),_:1})]),_:1}),t(_,{label:"\u5C0F\u7A0B\u5E8F\u5206\u4EAB\u6807\u9898"},{default:a(()=>[t(n,null,{default:a(()=>[s("div",De,[t(w,{modelValue:e.value.goods_share_title,"onUpdate:modelValue":l[7]||(l[7]=o=>e.value.goods_share_title=o),size:"small","show-word-limit":"",maxlength:"50",placeholder:"\u8BF7\u8F93\u5165\u5C0F\u7A0B\u5E8F\u5206\u4EAB\u6807\u9898"},null,8,["modelValue"]),Se,s("div",Ie,[s("div",Le,k(e.value.goods_share_title?e.value.goods_share_title:"\u5C0F\u7A0B\u5E8F\u5206\u4EAB\u6807\u9898"),1),s("div",$e,[e.value.goods_share_img?(g(),p("img",{key:0,src:e.value.goods_share_img,alt:""},null,8,Be)):C("",!0)]),Fe,He])])]),_:1})]),_:1}),t(_,{label:"\u5C0F\u7A0B\u5E8F\u5206\u4EAB\u56FE"},{default:a(()=>[t(n,null,{default:a(()=>[s("div",Ne,[t(x,{url:e.value.goods_share_img?[e.value.goods_share_img]:[],max:1,width:80,height:80,onUrlChange:l[8]||(l[8]=o=>z("goods_share_img",o))},null,8,["url"]),Ee])]),_:1})]),_:1}),t(_,{label:"\u5546\u54C1\u8BA2\u5355\u5217\u8868\u56FE"},{default:a(()=>[t(n,null,{default:a(()=>[s("div",Re,[t(x,{url:e.value.goods_order_img?[e.value.goods_order_img]:[],max:1,width:80,height:80,onUrlChange:l[9]||(l[9]=o=>z("goods_order_img",o))},null,8,["url"]),Ye])]),_:1})]),_:1}),s("div",Ke,[t(m,{title:"\u4EF7\u683C\u5E93\u5B58"})]),t(_,{required:"",label:"\u5151\u6362\u6240\u9700\u79EF\u5206"},{default:a(()=>[t(n,null,{default:a(()=>[s("div",Ae,[t(w,{modelValue:e.value.goods_score,"onUpdate:modelValue":l[10]||(l[10]=o=>e.value.goods_score=o),modelModifiers:{number:!0},autocomplete:"off",placeholder:"\u8BF7\u8F93\u5165\u5151\u6362\u6240\u9700\u79EF\u5206",size:"small",maxlength:"8",onKeyup:l[11]||(l[11]=o=>D(M)(e.value.goods_score,"goods_score"))},{append:a(()=>[Oe]),_:1},8,["modelValue"])])]),_:1})]),_:1}),t(_,{required:"",label:"\u5E93\u5B58"},{default:a(()=>[t(n,null,{default:a(()=>[s("div",Pe,[t(w,{modelValue:e.value.goods_stock,"onUpdate:modelValue":l[12]||(l[12]=o=>e.value.goods_stock=o),modelModifiers:{number:!0},autocomplete:"off",placeholder:"\u8BF7\u8F93\u5165\u5E93\u5B58",size:"small",maxlength:"8",onKeyup:l[13]||(l[13]=o=>D(M)(e.value.goods_stock,"goods_stock"))},{append:a(()=>[Je]),_:1},8,["modelValue"])])]),_:1})]),_:1}),s("div",Qe,[t(m,{title:"\u5546\u54C1\u8BE6\u60C5"})]),t(_,{label:"\u8BE6\u60C5\u56FE",prop:"goods_details_img"},{default:a(()=>[t(n,null,{default:a(()=>[s("div",We,[t(x,{url:e.value.goods_details_img,"onUpdate:url":l[14]||(l[14]=o=>e.value.goods_details_img=o),max:10,width:80,height:80},null,8,["url"]),Xe])]),_:1})]),_:1}),e.value.goods_type=="arrival"?(g(),p("div",Ze,[t(m,{title:"\u5176\u4ED6\u4FE1\u606F"})])):C("",!0),e.value.goods_type=="arrival"?(g(),$(_,{key:1,required:"",label:"\u6838\u9500\u65F6\u95F4"},{default:a(()=>[t(n,null,{default:a(()=>[s("div",el,[t(Z,{modelValue:e.value.is_validity_time_type,"onUpdate:modelValue":l[18]||(l[18]=o=>e.value.is_validity_time_type=o)},{default:a(()=>[t(I,{label:"relative_time"},{default:a(()=>[ll,t(W,{modelValue:e.value.relative_days,"onUpdate:modelValue":l[15]||(l[15]=o=>e.value.relative_days=o),disabled:e.value.is_validity_time_type!=="relative_time",controls:!1,precision:0,max:999,style:{width:"64px"},onKeyup:l[16]||(l[16]=o=>D(M)(e.value.relative_days,"relative_days"))},null,8,["modelValue","disabled"]),tl]),_:1}),sl,t(I,{label:"absolute_time",class:"mt16"},{default:a(()=>[ol,t(X,{modelValue:v.value,"onUpdate:modelValue":l[17]||(l[17]=o=>v.value=o),disabled:e.value.is_validity_time_type!=="absolute_time","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetimerange","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":F.value,align:"right",style:{width:"calc(100% - 74px)","min-width":"340px"},onChange:E},null,8,["modelValue","disabled","default-time"]),al]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})):C("",!0),t(n,{class:"mt24"},{default:a(()=>[s("div",dl,[e.value.sale_status=="on_sale"?(g(),p("div",il,ul)):(g(),p("div",rl,gl)),s("div",vl,[t(L,{type:"default",size:"small",onClick:O},{default:a(()=>[pl]),_:1}),t(L,{type:"primary",size:"small",onClick:A},{default:a(()=>[fl]),_:1})])])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),t(te,{title:"\u63D0\u793A","dialog-visible":T.value,"cus-header":"",width:"480px","confirm-fn":P,onCancel:l[19]||(l[19]=o=>T.value=!1)},{default:a(()=>[yl]),_:1},8,["dialog-visible"])])}}};var Gl=fe(hl,[["__scopeId","data-v-2e707efc"]]);export{Gl as default};
